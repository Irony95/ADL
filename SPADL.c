/////////////////////////////////////////////////////////////////////////
//                                                                     //
//	CoSpace Robot                                                      //
//	Version 2.0.0                                                      //
//	DEC 16 2022                                                        //
//	Copyright (C) 2022 CoSpace Robot. All Rights Reserved              //
//                                                                     //
//  ONLY C Code can be compiled.                                       //
//                                                                     //
/////////////////////////////////////////////////////////////////////////

#define CsBot_AI_H//DO NOT delete this line
#ifndef CSBOT_REAL
#include <windows.h>
#include <stdio.h>
#include <math.h>
#define DLL_EXPORT extern __declspec(dllexport)
#define false 0
#define true 1
#endif

int Duration = 0;
int CurAction = -1;
int CurGame = 0;
int US_Front = 0;
int US_Left = 0;
int US_Right = 0;
int PositionX = 0;
int PositionY = 0;
int RotationZ = 0;
int DeltaAngle = 0;
int DeltaDist = 0;
int NavID = 0;
int NavDist = 0;
int CtrID = 0;
int CtrDist = 0;
int StnID = 0;
int StnDist = 0;
int Time = 0;
int MyState = 0;
int WheelLeft = 0;
int WheelRight = 0;
int LED = 0;
int AI_TeamID = 1;   //Robot Team ID.    1:Blue Ream;    2:Red Team.
int AI_SensorNum = 15;

#define CsBot_AI_C//DO NOT delete this line

//YiWei's Stuff
const double averageSpeed = 73.5;
void CalculateRoute(int arr[7]);
int onCar[6] = {0,1,2,3,4,5};
int nextParcelID = 6;

//Route
int route[8]; 
int routeIndex = 0;

//Pathing
int start = 0; //Start of the shortest path to a node
int end = 0; //End of the shortest path to a node
int pathID;
int angle;
int turningAngle;
int pathIndex = 0;

const double bruteForceTimeCoefficient = 2;

/* ----------- CHANGE THE VARIABLES BELOW WITH THE ONES GENERATED BY GraphGenerator.py, LOCATED IN pathing.txt -----------*/
const int amountOfNodes = 50;
const char *pathings[][50] = {
{"C01180"},{"C01270","P15214","P14180","P03135","P04090","C02180"},{"C01090","P18180","P30270","C03180"},{"C01090","P17180","S01180"},{"C01090","S02180"},{"C01090","S03180"},{"C01270","S04180"},{"C01270","P15214","P14180","S05180"},{"C01270","P15214","P14180","S06180"},{"C01270","P15214","P14180","S07180"},{"C01270","P16180","P13110","P11180","S08180"},{"C01090","P17180","P25250","P27180","S09180"},{"C01090","P17180","P25250","P27180","P28090","S10180"},{"C01090","P17180","P25250","P26270","P09180","S11180"},{"C01270","P16180","P13110","P12090","S12180"},{"C01090","P18180","S13180"},{"C01090","P19143","P20180","S14180"},{"C01090","P18180","P23090","S15180"},{"C01090","P17180"},{"C01090","P18180"},{"C01090","P19180"},{"C01270","P16180"},{"C01270","P15180"},{"C01270","P15214","P14180"},{"C01270","P15214","P14180","P01180"},{"C01270","P15214","P14180","P02180"},{"C01270","P15214","P14180","P03180"},{"C01270","P15214","P14180","P03135","P04180"},{"C01270","P16180","P13110","P11180","P05180"},{"C01090","P17180","P25250","P26270","P09180","P06180"},{"C01090","P17180","P25250","P27180","P07180"},{"C01090","P18180","P30180"},{"C01090","P18180","P30090","P31180"},{"C01090","P19143","P20180","P32180"},{"C01090","P19143","P20180","P29180"},{"C01090","P19143","P20180","P22180"},{"C01090","P19143","P20180"},{"C01270","P16180","P13180"},{"C01270","P16180","P13110","P12180"},{"C01270","P16180","P13110","P11180"},{"C01270","P16180","P13250","P10180"},{"C01270","P16180","P13110","P11180","P08180"},{"C01090","P18180","P21180"},{"C01090","P18180","P23180"},{"C01090","P17180","P25180"},{"C01090","P17180","P25110","P24180"},{"C01090","P17180","P25250","P27180"},{"C01090","P17180","P25250","P26180"},{"C01090","P17180","P25250","P26270","P09180"},{"C01090","P17180","P25250","P27180","P28180"},
{"C02270","P04315","P03000","P14034","P15090","C01180"},{"C02180"},{"C02090","C03180"},{"C02090","P06000","P09090","P26020","P25000","S01180"},{"C02270","P04315","P03000","P14034","P15090","S02180"},{"C02270","P04315","P03000","P14034","P15090","S03180"},{"C02270","P04315","P03000","P14034","P15090","S04180"},{"C02270","P04315","P03000","S05180"},{"C02270","P04315","P03000","S06180"},{"C02270","P04315","P03000","S07180"},{"C02090","P06270","P05006","S08180"},{"C02090","P07000","S09180"},{"C02090","P07000","P28090","S10180"},{"C02090","P06000","S11180"},{"C02090","P06270","P05006","S08354","P08000","P11070","P12090","S12180"},{"C02090","P07000","P27070","P24090","P23000","S13180"},{"C02090","P07000","P27070","P24090","P22000","S14180"},{"C02090","P07000","P27070","P24090","S15180"},{"C02270","P04315","P03000","P14034","P15090","P17180"},{"C02270","P04315","P03000","P14034","P15090","P18180"},{"C02270","P04315","P03000","P14034","P15090","P19180"},{"C02270","P04315","P03000","P14034","P15090","P16180"},{"C02270","P04315","P03000","P14034","P15180"},{"C02270","P04315","P03000","P14180"},{"C02270","P04315","P03000","P01180"},{"C02270","P04315","P03000","P02180"},{"C02270","P04315","P03180"},{"C02270","P04180"},{"C02090","P06270","P05180"},{"C02090","P06180"},{"C02090","P07180"},{"C02090","P30180"},{"C02090","P31180"},{"C02090","P31045","P32180"},{"C02090","P07000","P28090","P29180"},{"C02090","P07000","P27070","P24090","P22180"},{"C02090","P07000","P27070","P24090","P22000","P20180"},{"C02270","P04315","P03000","P01090","P10020","P13180"},{"C02090","P06270","P05006","S08354","P08000","P11070","P12180"},{"C02090","P06270","P05006","S08354","P08000","P11180"},{"C02270","P04315","P03000","P01090","P10180"},{"C02090","P06270","P05006","S08354","P08180"},{"C02090","P07000","P27070","P24090","P23000","P21180"},{"C02090","P07000","P27070","P24090","P23180"},{"C02090","P06000","P09090","P26020","P25180"},{"C02090","P07000","P27070","P24180"},{"C02090","P07000","P27180"},{"C02090","P06000","P09090","P26180"},{"C02090","P06000","P09180"},{"C02090","P07000","P28180"},
{"C03090","P30000","P18270","C01180"},{"C03270","C02180"},{"C03180"},{"C03270","P07000","P27290","P25000","S01180"},{"C03270","P07000","P27290","P25000","P17090","S02180"},{"C03270","P07000","P27290","P25000","P17270","S03180"},{"C03270","P07000","P27290","P25000","P17270","S04180"},{"C03270","P04315","P03000","S05180"},{"C03270","P04315","P03000","S06180"},{"C03270","P04315","P03000","S07180"},{"C03270","P05006","S08180"},{"C03270","P07000","S09180"},{"C03270","P07000","P28090","S10180"},{"C03270","P06000","S11180"},{"C03270","P05006","S08354","P08000","P11070","P12090","S12180"},{"C03270","P07000","P27070","P24090","P23000","S13180"},{"C03090","P31045","P32000","S14180"},{"C03270","P07000","P27070","P24090","S15180"},{"C03270","P07000","P27290","P25000","P17180"},{"C03270","P07000","P27070","P24090","P23000","P18180"},{"C03090","P31045","P32000","P20323","P19180"},{"C03270","P07000","P27290","P25000","P17270","P16180"},{"C03270","P04315","P03000","P14034","P15180"},{"C03270","P04315","P03000","P14180"},{"C03270","P04315","P03000","P01180"},{"C03270","P04315","P03000","P02180"},{"C03270","P04315","P03180"},{"C03270","P04180"},{"C03270","P05180"},{"C03270","P06180"},{"C03270","P07180"},{"C03090","P30180"},{"C03090","P31180"},{"C03090","P31045","P32180"},{"C03090","P31045","P32000","P29180"},{"C03090","P31045","P32000","P22180"},{"C03090","P31045","P32000","P20180"},{"C03270","P05006","S08354","P08000","P11070","P13180"},{"C03270","P05006","S08354","P08000","P11070","P12180"},{"C03270","P05006","S08354","P08000","P11180"},{"C03270","P05006","S08354","P08000","P11290","P10180"},{"C03270","P05006","S08354","P08180"},{"C03270","P07000","P27070","P24090","P23000","P21180"},{"C03270","P07000","P27070","P24090","P23180"},{"C03270","P07000","P27290","P25180"},{"C03270","P07000","P27070","P24180"},{"C03270","P07000","P27180"},{"C03270","P07000","P27290","P26180"},{"C03270","P06000","P09180"},{"C03270","P07000","P28180"},
{"S01000","P17270","C01180"},{"S01180","P25250","P26270","P09180","P06270","C02180"},{"S01180","P25250","P27180","P07090","C03180"},{"S01180"},{"S01000","P17090","S02180"},{"S01000","P17270","S03180"},{"S01000","P17270","S04180"},{"S01000","P17270","P15214","P14180","S05180"},{"S01000","P17270","P15214","P14180","S06180"},{"S01180","P25250","P26270","P02180","S07180"},{"S01180","P25250","P26270","P09180","P06270","P05006","S08180"},{"S01180","P25250","P27180","S09180"},{"S01180","P25250","P27180","P28090","S10180"},{"S01180","P25250","P26270","P09180","S11180"},{"S01000","P17090","P18180","P21270","S12180"},{"S01000","P17090","P18180","S13180"},{"S01000","P17090","P19143","P20180","S14180"},{"S01180","P25110","P24090","S15180"},{"S01000","P17180"},{"S01000","P17090","P18180"},{"S01000","P17090","P19180"},{"S01000","P17270","P16180"},{"S01000","P17270","P15180"},{"S01000","P17270","P15214","P14180"},{"S01000","P17270","P15214","P14180","P01180"},{"S01180","P25250","P26270","P02180"},{"S01180","P25250","P26270","P02180","P03180"},{"S01180","P25250","P26270","P09180","P06270","P04180"},{"S01180","P25250","P26270","P09180","P06270","P05180"},{"S01180","P25250","P26270","P09180","P06180"},{"S01180","P25250","P27180","P07180"},{"S01180","P25110","P24090","P23180","P30180"},{"S01180","P25110","P24090","P22180","P32225","P31180"},{"S01180","P25110","P24090","P22180","P32180"},{"S01180","P25110","P24090","P22180","P29180"},{"S01180","P25110","P24090","P22180"},{"S01000","P17090","P19143","P20180"},{"S01000","P17270","P16180","P13180"},{"S01000","P17270","P16180","P13110","P12180"},{"S01000","P17270","P16180","P13110","P11180"},{"S01000","P17270","P16180","P13250","P10180"},{"S01180","P25250","P27180","P28270","P08180"},{"S01000","P17090","P18180","P21180"},{"S01180","P25110","P24090","P23180"},{"S01180","P25180"},{"S01180","P25110","P24180"},{"S01180","P25250","P27180"},{"S01180","P25250","P26180"},{"S01180","P25250","P26270","P09180"},{"S01180","P25250","P27180","P28180"},
{"S02270","C01180"},{"S02270","P15214","P14180","P03135","P04090","C02180"},{"S02270","P17180","P25250","P27180","P07090","C03180"},{"S02270","P17180","S01180"},{"S02180"},{"S02270","S03180"},{"S02270","S04180"},{"S02270","P15214","P14180","S05180"},{"S02270","P15214","P14180","S06180"},{"S02270","P15214","P14180","S07180"},{"S02270","P16180","P13110","P11180","S08180"},{"S02270","P17180","P25250","P27180","S09180"},{"S02090","P19143","P20180","P29270","S10180"},{"S02270","P17180","P25250","P26270","P09180","S11180"},{"S02090","P18180","P21270","S12180"},{"S02090","P18180","S13180"},{"S02090","P19143","P20180","S14180"},{"S02090","P18180","P23090","S15180"},{"S02270","P17180"},{"S02090","P18180"},{"S02090","P19180"},{"S02270","P16180"},{"S02270","P15180"},{"S02270","P15214","P14180"},{"S02270","P15214","P14180","P01180"},{"S02270","P15214","P14180","P02180"},{"S02270","P15214","P14180","P03180"},{"S02270","P15214","P14180","P03135","P04180"},{"S02270","P17180","P25250","P26270","P09180","P06270","P05180"},{"S02270","P17180","P25250","P26270","P09180","P06180"},{"S02090","P18180","P30270","P07180"},{"S02090","P18180","P30180"},{"S02090","P18180","P30090","P31180"},{"S02090","P19143","P20180","P32180"},{"S02090","P19143","P20180","P29180"},{"S02090","P19143","P20180","P22180"},{"S02090","P19143","P20180"},{"S02270","P16180","P13180"},{"S02270","P16180","P13110","P12180"},{"S02270","P16180","P13110","P11180"},{"S02270","P16180","P13250","P10180"},{"S02270","P16180","P13110","P11180","P08180"},{"S02090","P18180","P21180"},{"S02090","P18180","P23180"},{"S02270","P17180","P25180"},{"S02270","P17180","P25110","P24180"},{"S02270","P17180","P25250","P27180"},{"S02270","P17180","P25250","P26180"},{"S02270","P17180","P25250","P26270","P09180"},{"S02270","P17180","P25250","P27180","P28180"},
{"S03270","C01180"},{"S03270","P15214","P14180","P03135","P04090","C02180"},{"S03090","P17180","P25250","P27180","P07090","C03180"},{"S03090","P17180","S01180"},{"S03090","S02180"},{"S03180"},{"S03270","S04180"},{"S03270","P15214","P14180","S05180"},{"S03270","P15214","P14180","S06180"},{"S03270","P15214","P14180","S07180"},{"S03270","P16180","P13110","P11180","S08180"},{"S03090","P17180","P25250","P27180","S09180"},{"S03090","P17180","P25250","P27180","P28090","S10180"},{"S03090","P17180","P25250","P26270","P09180","S11180"},{"S03270","P16180","P13110","P12090","S12180"},{"S03090","P18180","S13180"},{"S03090","P19143","P20180","S14180"},{"S03090","P18180","P23090","S15180"},{"S03090","P17180"},{"S03090","P18180"},{"S03090","P19180"},{"S03270","P16180"},{"S03270","P15180"},{"S03270","P15214","P14180"},{"S03270","P15214","P14180","P01180"},{"S03270","P15214","P14180","P02180"},{"S03270","P15214","P14180","P03180"},{"S03270","P15214","P14180","P03135","P04180"},{"S03270","P16180","P13110","P11180","P05180"},{"S03090","P17180","P25250","P26270","P09180","P06180"},{"S03090","P17180","P25250","P27180","P07180"},{"S03090","P18180","P30180"},{"S03090","P18180","P30090","P31180"},{"S03090","P19143","P20180","P32180"},{"S03090","P19143","P20180","P29180"},{"S03090","P19143","P20180","P22180"},{"S03090","P19143","P20180"},{"S03270","P16180","P13180"},{"S03270","P16180","P13110","P12180"},{"S03270","P16180","P13110","P11180"},{"S03270","P16180","P13250","P10180"},{"S03270","P16180","P13110","P11180","P08180"},{"S03090","P18180","P21180"},{"S03090","P18180","P23180"},{"S03090","P17180","P25180"},{"S03090","P17180","P25110","P24180"},{"S03090","P17180","P25250","P27180"},{"S03090","P17180","P25250","P26180"},{"S03090","P17180","P25250","P26270","P09180"},{"S03090","P17180","P25250","P27180","P28180"},
{"S04090","C01180"},{"S04270","P15214","P14180","P03135","P04090","C02180"},{"S04090","P17180","P25250","P27180","P07090","C03180"},{"S04090","P17180","S01180"},{"S04090","S02180"},{"S04090","S03180"},{"S04180"},{"S04270","P15214","P14180","S05180"},{"S04270","P15214","P14180","S06180"},{"S04270","P15214","P14180","S07180"},{"S04090","P16180","P13110","P11180","S08180"},{"S04270","P15214","P14180","P03135","P04090","P07000","S09180"},{"S04090","P16180","P13110","P11180","P08090","S10180"},{"S04270","P15214","P14180","P02090","P09180","S11180"},{"S04090","P16180","P13110","P12090","S12180"},{"S04090","P18180","S13180"},{"S04090","P19143","P20180","S14180"},{"S04090","P18180","P23090","S15180"},{"S04090","P17180"},{"S04090","P18180"},{"S04090","P19180"},{"S04090","P16180"},{"S04270","P15180"},{"S04270","P15214","P14180"},{"S04270","P15214","P14180","P01180"},{"S04270","P15214","P14180","P02180"},{"S04270","P15214","P14180","P03180"},{"S04270","P15214","P14180","P03135","P04180"},{"S04090","P16180","P13110","P11180","P05180"},{"S04270","P15214","P14180","P03135","P04090","P06180"},{"S04270","P15214","P14180","P03135","P04090","P07180"},{"S04090","P18180","P30180"},{"S04090","P18180","P30090","P31180"},{"S04090","P19143","P20180","P32180"},{"S04090","P19143","P20180","P29180"},{"S04090","P19143","P20180","P22180"},{"S04090","P19143","P20180"},{"S04090","P16180","P13180"},{"S04090","P16180","P13110","P12180"},{"S04090","P16180","P13110","P11180"},{"S04090","P16180","P13250","P10180"},{"S04090","P16180","P13110","P11180","P08180"},{"S04090","P18180","P21180"},{"S04090","P18180","P23180"},{"S04090","P17180","P25180"},{"S04090","P17180","P25110","P24180"},{"S04090","P17180","P25250","P27180"},{"S04090","P17180","P25250","P26180"},{"S04270","P15214","P14180","P02090","P09180"},{"S04090","P16180","P13110","P11180","P08090","P28180"},
{"S05000","P14034","P15090","C01180"},{"S05180","P03135","P04090","C02180"},{"S05180","P03135","P04090","C03180"},{"S05000","P14034","P15090","P17180","S01180"},{"S05000","P14034","P15090","S02180"},{"S05000","P14034","P15090","S03180"},{"S05000","P14034","P15090","S04180"},{"S05180"},{"S05180","S06180"},{"S05180","S07180"},{"S05180","P01090","P10160","P11180","S08180"},{"S05180","P03135","P04090","P07000","S09180"},{"S05180","P01090","P10160","P11180","P08090","S10180"},{"S05180","P02090","P09180","S11180"},{"S05180","P01090","P10160","P12090","S12180"},{"S05000","P14034","P15090","P18180","S13180"},{"S05000","P14034","P15090","P19143","P20180","S14180"},{"S05000","P14034","P15090","P18180","P23090","S15180"},{"S05000","P14034","P15090","P17180"},{"S05000","P14034","P15090","P18180"},{"S05000","P14034","P15090","P19180"},{"S05000","P14034","P15090","P16180"},{"S05000","P14034","P15180"},{"S05000","P14180"},{"S05180","P01180"},{"S05180","P02180"},{"S05180","P03180"},{"S05180","P03135","P04180"},{"S05180","P01090","P10160","P11180","P05180"},{"S05180","P03135","P04090","P06180"},{"S05180","P03135","P04090","P07180"},{"S05180","P03135","P04090","P30180"},{"S05180","P03135","P04090","P31180"},{"S05180","P03135","P04090","P31045","P32180"},{"S05180","P01090","P10160","P11180","P08090","P29180"},{"S05000","P14034","P15090","P19143","P20180","P22180"},{"S05000","P14034","P15090","P19143","P20180"},{"S05180","P01090","P10020","P13180"},{"S05180","P01090","P10160","P12180"},{"S05180","P01090","P10160","P11180"},{"S05180","P01090","P10180"},{"S05180","P01090","P10160","P11180","P08180"},{"S05000","P14034","P15090","P18180","P21180"},{"S05000","P14034","P15090","P18180","P23180"},{"S05000","P14034","P15090","P17180","P25180"},{"S05000","P14034","P15090","P17180","P25110","P24180"},{"S05180","P02090","P26160","P27180"},{"S05180","P02090","P26180"},{"S05180","P02090","P09180"},{"S05180","P01090","P10160","P11180","P08090","P28180"},
{"S06000","P14034","P15090","C01180"},{"S06180","P03135","P04090","C02180"},{"S06180","P03135","P04090","C03180"},{"S06000","P14034","P15090","P17180","S01180"},{"S06000","P14034","P15090","S02180"},{"S06000","P14034","P15090","S03180"},{"S06000","P14034","P15090","S04180"},{"S06000","S05180"},{"S06180"},{"S06180","S07180"},{"S06000","P01090","P10160","P11180","S08180"},{"S06180","P02090","P26160","P27180","S09180"},{"S06180","P02090","P26160","P27180","P28090","S10180"},{"S06180","P02090","P09180","S11180"},{"S06000","P01090","P10160","P12090","S12180"},{"S06000","P14034","P15090","P18180","S13180"},{"S06000","P14034","P15090","P19143","P20180","S14180"},{"S06180","P02090","P26020","P24090","S15180"},{"S06000","P14034","P15090","P17180"},{"S06000","P14034","P15090","P18180"},{"S06000","P14034","P15090","P19180"},{"S06000","P14034","P15090","P16180"},{"S06000","P14034","P15180"},{"S06000","P14180"},{"S06000","P01180"},{"S06180","P02180"},{"S06180","P03180"},{"S06180","P03135","P04180"},{"S06000","P01090","P10160","P11180","P05180"},{"S06180","P03135","P04090","P06180"},{"S06180","P03135","P04090","P07180"},{"S06180","P03135","P04090","P30180"},{"S06180","P03135","P04090","P31180"},{"S06180","P03135","P04090","P31045","P32180"},{"S06180","P02090","P26160","P27180","P28090","P29180"},{"S06180","P02090","P26020","P24090","P22180"},{"S06000","P14034","P15090","P19143","P20180"},{"S06000","P01090","P10020","P13180"},{"S06000","P01090","P10160","P12180"},{"S06000","P01090","P10160","P11180"},{"S06000","P01090","P10180"},{"S06000","P01090","P10160","P11180","P08180"},{"S06000","P01090","P10160","P12090","P21180"},{"S06180","P02090","P26020","P24090","P23180"},{"S06180","P02090","P26020","P25180"},{"S06180","P02090","P26020","P24180"},{"S06180","P02090","P26160","P27180"},{"S06180","P02090","P26180"},{"S06180","P02090","P09180"},{"S06180","P02090","P26160","P27180","P28180"},
{"S07000","P14034","P15090","C01180"},{"S07180","P03135","P04090","C02180"},{"S07180","P03135","P04090","C03180"},{"S07000","P02090","P26020","P25000","S01180"},{"S07000","P14034","P15090","S02180"},{"S07000","P14034","P15090","S03180"},{"S07000","P14034","P15090","S04180"},{"S07000","S05180"},{"S07000","S06180"},{"S07180"},{"S07180","P03135","P04090","P06270","P05006","S08180"},{"S07180","P03135","P04090","P07000","S09180"},{"S07180","P03135","P04090","P07000","P28090","S10180"},{"S07000","P02090","P09180","S11180"},{"S07000","P01090","P10160","P12090","S12180"},{"S07000","P14034","P15090","P18180","S13180"},{"S07000","P14034","P15090","P19143","P20180","S14180"},{"S07000","P02090","P26020","P24090","S15180"},{"S07000","P14034","P15090","P17180"},{"S07000","P14034","P15090","P18180"},{"S07000","P14034","P15090","P19180"},{"S07000","P14034","P15090","P16180"},{"S07000","P14034","P15180"},{"S07000","P14180"},{"S07000","P01180"},{"S07000","P02180"},{"S07180","P03180"},{"S07180","P03135","P04180"},{"S07180","P03135","P04090","P06270","P05180"},{"S07180","P03135","P04090","P06180"},{"S07180","P03135","P04090","P07180"},{"S07180","P03135","P04090","P30180"},{"S07180","P03135","P04090","P31180"},{"S07180","P03135","P04090","P31045","P32180"},{"S07180","P03135","P04090","P07000","P28090","P29180"},{"S07000","P02090","P26020","P24090","P22180"},{"S07000","P14034","P15090","P19143","P20180"},{"S07000","P01090","P10020","P13180"},{"S07000","P01090","P10160","P12180"},{"S07000","P01090","P10160","P11180"},{"S07000","P01090","P10180"},{"S07000","P01090","P10160","P11180","P08180"},{"S07000","P01090","P10160","P12090","P21180"},{"S07000","P02090","P26020","P24090","P23180"},{"S07000","P02090","P26020","P25180"},{"S07000","P02090","P26020","P24180"},{"S07000","P02090","P26160","P27180"},{"S07000","P02090","P26180"},{"S07000","P02090","P09180"},{"S07180","P03135","P04090","P07000","P28180"},
{"S08354","P08000","P11070","P13000","P16090","C01180"},{"S08186","P05090","P06270","C02180"},{"S08186","P05090","C03180"},{"S08186","P05090","P06000","P09090","P26020","P25000","S01180"},{"S08354","P08000","P11070","P13000","P16090","S02180"},{"S08354","P08000","P11070","P13000","P16090","S03180"},{"S08354","P08000","P11070","P13000","P16270","S04180"},{"S08354","P08000","P11290","P10270","P01000","S05180"},{"S08354","P08000","P11290","P10270","P01180","S06180"},{"S08186","P05090","P06270","P04315","P03000","S07180"},{"S08180"},{"S08186","P05090","P07000","S09180"},{"S08354","P08090","S10180"},{"S08186","P05090","P06000","S11180"},{"S08354","P08000","P11070","P12090","S12180"},{"S08354","P08000","P11070","P12090","P21000","S13180"},{"S08354","P08090","P29000","S14180"},{"S08354","P08090","P28000","P27070","P24090","S15180"},{"S08354","P08000","P11070","P13000","P16090","P17180"},{"S08354","P08000","P11070","P12090","P21000","P18180"},{"S08354","P08090","P29000","P20323","P19180"},{"S08354","P08000","P11070","P13000","P16180"},{"S08354","P08000","P11290","P10270","P01000","P14034","P15180"},{"S08354","P08000","P11290","P10270","P01000","P14180"},{"S08354","P08000","P11290","P10270","P01180"},{"S08186","P05270","P04315","P03000","P02180"},{"S08186","P05270","P04315","P03180"},{"S08186","P05270","P04180"},{"S08186","P05180"},{"S08186","P05090","P06180"},{"S08186","P05090","P07180"},{"S08186","P05090","P30180"},{"S08186","P05090","P31180"},{"S08186","P05090","P31045","P32180"},{"S08354","P08090","P29180"},{"S08354","P08090","P29000","P22180"},{"S08354","P08090","P29000","P20180"},{"S08354","P08000","P11070","P13180"},{"S08354","P08000","P11070","P12180"},{"S08354","P08000","P11180"},{"S08354","P08000","P11290","P10180"},{"S08354","P08180"},{"S08354","P08000","P11070","P12090","P21180"},{"S08354","P08090","P28000","P27070","P24090","P23180"},{"S08186","P05090","P06000","P09090","P26020","P25180"},{"S08354","P08090","P28000","P27070","P24180"},{"S08354","P08090","P28000","P27180"},{"S08186","P05090","P06000","P09090","P26180"},{"S08186","P05090","P06000","P09180"},{"S08354","P08090","P28180"},
{"S09000","P27290","P25000","P17270","C01180"},{"S09180","P07270","C02180"},{"S09180","P07090","C03180"},{"S09000","P27290","P25000","S01180"},{"S09000","P27290","P25000","P17090","S02180"},{"S09000","P27290","P25000","P17270","S03180"},{"S09180","P07270","P04315","P03000","P14034","P15090","S04180"},{"S09180","P07270","P04315","P03000","S05180"},{"S09000","P27290","P26270","P02000","S06180"},{"S09180","P07270","P04315","P03000","S07180"},{"S09180","P07270","P05006","S08180"},{"S09180"},{"S09000","P28090","S10180"},{"S09180","P07270","P06000","S11180"},{"S09000","P27070","P24090","P23000","P21270","S12180"},{"S09000","P27070","P24090","P23000","S13180"},{"S09000","P27070","P24090","P22000","S14180"},{"S09000","P27070","P24090","S15180"},{"S09000","P27290","P25000","P17180"},{"S09000","P27070","P24090","P23000","P18180"},{"S09000","P27070","P24090","P23000","P18090","P19180"},{"S09000","P27290","P25000","P17270","P16180"},{"S09000","P27290","P25000","P17270","P15180"},{"S09000","P27290","P26270","P02000","P14180"},{"S09000","P27290","P26270","P02000","P01180"},{"S09000","P27290","P26270","P02180"},{"S09180","P07270","P04315","P03180"},{"S09180","P07270","P04180"},{"S09180","P07270","P05180"},{"S09180","P07270","P06180"},{"S09180","P07180"},{"S09180","P07090","P30180"},{"S09180","P07090","P31180"},{"S09180","P07090","P31045","P32180"},{"S09000","P28090","P29180"},{"S09000","P27070","P24090","P22180"},{"S09000","P27070","P24090","P22000","P20180"},{"S09000","P28270","P08000","P11070","P13180"},{"S09000","P28270","P08000","P11070","P12180"},{"S09000","P28270","P08000","P11180"},{"S09000","P28270","P08000","P11290","P10180"},{"S09000","P28270","P08180"},{"S09000","P27070","P24090","P23000","P21180"},{"S09000","P27070","P24090","P23180"},{"S09000","P27290","P25180"},{"S09000","P27070","P24180"},{"S09000","P27180"},{"S09000","P27290","P26180"},{"S09000","P27290","P26270","P09180"},{"S09000","P28180"},
{"S10270","P28000","P27290","P25000","P17270","C01180"},{"S10270","P28180","P07270","C02180"},{"S10270","P28180","P07090","C03180"},{"S10270","P28000","P27290","P25000","S01180"},{"S10090","P29000","P20323","P19270","S02180"},{"S10270","P28000","P27290","P25000","P17270","S03180"},{"S10270","P08000","P11070","P13000","P16270","S04180"},{"S10270","P08000","P11290","P10270","P01000","S05180"},{"S10270","P28000","P27290","P26270","P02000","S06180"},{"S10270","P28180","P07270","P04315","P03000","S07180"},{"S10270","P08174","S08180"},{"S10270","P28180","S09180"},{"S10180"},{"S10270","P28000","P27290","P26270","P09180","S11180"},{"S10270","P08000","P11070","P12090","S12180"},{"S10270","P28000","P27070","P24090","P23000","S13180"},{"S10090","P29000","S14180"},{"S10270","P28000","P27070","P24090","S15180"},{"S10270","P28000","P27290","P25000","P17180"},{"S10270","P28000","P27070","P24090","P23000","P18180"},{"S10090","P29000","P20323","P19180"},{"S10270","P28000","P27290","P25000","P17270","P16180"},{"S10270","P28000","P27290","P25000","P17270","P15180"},{"S10270","P28000","P27290","P26270","P02000","P14180"},{"S10270","P28000","P27290","P26270","P02000","P01180"},{"S10270","P28000","P27290","P26270","P02180"},{"S10270","P28180","P07270","P04315","P03180"},{"S10270","P28180","P07270","P04180"},{"S10270","P28180","P07270","P05180"},{"S10270","P28180","P07270","P06180"},{"S10270","P28180","P07180"},{"S10270","P28180","P07090","P30180"},{"S10090","P29180","P32225","P31180"},{"S10090","P29180","P32180"},{"S10090","P29180"},{"S10090","P29000","P22180"},{"S10090","P29000","P20180"},{"S10270","P08000","P11070","P13180"},{"S10270","P08000","P11070","P12180"},{"S10270","P08000","P11180"},{"S10270","P08000","P11290","P10180"},{"S10270","P08180"},{"S10270","P28000","P27070","P24090","P23000","P21180"},{"S10270","P28000","P27070","P24090","P23180"},{"S10270","P28000","P27290","P25180"},{"S10270","P28000","P27070","P24180"},{"S10270","P28000","P27180"},{"S10270","P28000","P27290","P26180"},{"S10270","P28000","P27290","P26270","P09180"},{"S10270","P28180"},
{"S11000","P09090","P26020","P25000","P17270","C01180"},{"S11180","P06270","C02180"},{"S11180","P06090","C03180"},{"S11000","P09090","P26020","P25000","S01180"},{"S11000","P09090","P26020","P25000","P17090","S02180"},{"S11000","P09090","P26020","P25000","P17270","S03180"},{"S11000","P09270","P02000","P14034","P15090","S04180"},{"S11000","P09270","P02000","S05180"},{"S11000","P09270","P02000","S06180"},{"S11000","P09270","P02180","S07180"},{"S11180","P06270","P05006","S08180"},{"S11180","P06090","P07000","S09180"},{"S11000","P09090","P26160","P27180","P28090","S10180"},{"S11180"},{"S11180","P06270","P05006","S08354","P08000","P11070","P12090","S12180"},{"S11000","P09090","P26020","P24090","P23000","S13180"},{"S11000","P09090","P26020","P24090","P22000","S14180"},{"S11000","P09090","P26020","P24090","S15180"},{"S11000","P09090","P26020","P25000","P17180"},{"S11000","P09090","P26020","P25000","P17090","P18180"},{"S11000","P09090","P26020","P25000","P17090","P19180"},{"S11000","P09090","P26020","P25000","P17270","P16180"},{"S11000","P09270","P02000","P14034","P15180"},{"S11000","P09270","P02000","P14180"},{"S11000","P09270","P02000","P01180"},{"S11000","P09270","P02180"},{"S11180","P06270","P04315","P03180"},{"S11180","P06270","P04180"},{"S11180","P06270","P05180"},{"S11180","P06180"},{"S11180","P06090","P07180"},{"S11180","P06090","P30180"},{"S11180","P06090","P31180"},{"S11180","P06090","P31045","P32180"},{"S11000","P09090","P26160","P27180","P28090","P29180"},{"S11000","P09090","P26020","P24090","P22180"},{"S11000","P09090","P26020","P24090","P22000","P20180"},{"S11000","P09270","P02000","P01090","P10020","P13180"},{"S11180","P06270","P05006","S08354","P08000","P11070","P12180"},{"S11180","P06270","P05006","S08354","P08000","P11180"},{"S11000","P09270","P02000","P01090","P10180"},{"S11180","P06270","P05006","S08354","P08180"},{"S11000","P09090","P26020","P24090","P23000","P21180"},{"S11000","P09090","P26020","P24090","P23180"},{"S11000","P09090","P26020","P25180"},{"S11000","P09090","P26020","P24180"},{"S11000","P09090","P26160","P27180"},{"S11000","P09090","P26180"},{"S11000","P09180"},{"S11000","P09090","P26160","P27180","P28180"},
{"S12270","P12340","P13000","P16090","C01180"},{"S12270","P12200","P11180","P05090","P06270","C02180"},{"S12270","P12200","P11180","P05090","C03180"},{"S12090","P21000","P18270","P17180","S01180"},{"S12090","P21000","P18270","S02180"},{"S12270","P12340","P13000","P16090","S03180"},{"S12270","P12340","P13000","P16270","S04180"},{"S12270","P12200","P10270","P01000","S05180"},{"S12270","P12200","P10270","P01180","S06180"},{"S12270","P12200","P10270","P01180","S07180"},{"S12270","P12200","P11180","S08180"},{"S12090","P21180","P23270","P24200","P27180","S09180"},{"S12270","P12200","P11180","P08090","S10180"},{"S12270","P12200","P11180","P05090","P06000","S11180"},{"S12180"},{"S12090","P21000","S13180"},{"S12090","P21180","P23090","P22000","S14180"},{"S12090","P21180","P23090","S15180"},{"S12270","P12340","P13000","P16090","P17180"},{"S12090","P21000","P18180"},{"S12090","P21000","P18090","P19180"},{"S12270","P12340","P13000","P16180"},{"S12270","P12340","P13000","P16270","P15180"},{"S12270","P12340","P13000","P16270","P15214","P14180"},{"S12270","P12200","P10270","P01180"},{"S12270","P12200","P10270","P01180","P02180"},{"S12270","P12200","P10270","P01180","P03180"},{"S12270","P12200","P11180","P05270","P04180"},{"S12270","P12200","P11180","P05180"},{"S12270","P12200","P11180","P05090","P06180"},{"S12270","P12200","P11180","P05090","P07180"},{"S12090","P21180","P30180"},{"S12090","P21180","P30090","P31180"},{"S12090","P21180","P23090","P22180","P32180"},{"S12090","P21180","P23090","P22180","P29180"},{"S12090","P21180","P23090","P22180"},{"S12090","P21000","P18090","P19143","P20180"},{"S12270","P12340","P13180"},{"S12270","P12180"},{"S12270","P12200","P11180"},{"S12270","P12200","P10180"},{"S12270","P12200","P11180","P08180"},{"S12090","P21180"},{"S12090","P21180","P23180"},{"S12270","P12340","P13000","P16090","P17180","P25180"},{"S12090","P21180","P23270","P24180"},{"S12090","P21180","P23270","P24200","P27180"},{"S12270","P12340","P13000","P16090","P17180","P25250","P26180"},{"S12270","P12200","P10270","P01180","P02090","P09180"},{"S12270","P12200","P11180","P08090","P28180"},
{"S13000","P18270","C01180"},{"S13180","P23270","P24200","P27180","P07270","C02180"},{"S13180","P23270","P24200","P27180","P07090","C03180"},{"S13000","P18270","P17180","S01180"},{"S13000","P18270","S02180"},{"S13000","P18270","S03180"},{"S13000","P18270","S04180"},{"S13000","P18270","P15214","P14180","S05180"},{"S13000","P18270","P15214","P14180","S06180"},{"S13000","P18270","P15214","P14180","S07180"},{"S13180","P21270","P12200","P11180","S08180"},{"S13180","P23270","P24200","P27180","S09180"},{"S13180","P23270","P24200","P27180","P28090","S10180"},{"S13180","P23270","P24340","P26270","P09180","S11180"},{"S13180","P21270","S12180"},{"S13180"},{"S13000","P18090","P19143","P20180","S14180"},{"S13180","P23090","S15180"},{"S13000","P18270","P17180"},{"S13000","P18180"},{"S13000","P18090","P19180"},{"S13000","P18270","P16180"},{"S13000","P18270","P15180"},{"S13000","P18270","P15214","P14180"},{"S13000","P18270","P15214","P14180","P01180"},{"S13000","P18270","P15214","P14180","P02180"},{"S13000","P18270","P15214","P14180","P03180"},{"S13180","P30270","P04180"},{"S13180","P30270","P05180"},{"S13180","P30270","P06180"},{"S13180","P30270","P07180"},{"S13180","P30180"},{"S13180","P30090","P31180"},{"S13180","P23090","P22180","P32180"},{"S13180","P23090","P22180","P29180"},{"S13180","P23090","P22180"},{"S13000","P18090","P19143","P20180"},{"S13000","P18270","P16180","P13180"},{"S13180","P21270","P12180"},{"S13180","P21270","P12200","P11180"},{"S13000","P18270","P16180","P13250","P10180"},{"S13180","P21270","P12200","P11180","P08180"},{"S13180","P21180"},{"S13180","P23180"},{"S13000","P18270","P17180","P25180"},{"S13180","P23270","P24180"},{"S13180","P23270","P24200","P27180"},{"S13000","P18270","P17180","P25250","P26180"},{"S13000","P18270","P17180","P25250","P26270","P09180"},{"S13180","P23270","P24200","P27180","P28180"},
{"S14000","P20323","P19270","C01180"},{"S14180","P22270","P24200","P27180","P07270","C02180"},{"S14180","P32225","P31270","C03180"},{"S14000","P20323","P19270","P17180","S01180"},{"S14000","P20323","P19270","S02180"},{"S14000","P20323","P19270","S03180"},{"S14000","P20323","P19270","S04180"},{"S14000","P20323","P19270","P15214","P14180","S05180"},{"S14000","P20323","P19270","P15214","P14180","S06180"},{"S14000","P20323","P19270","P15214","P14180","S07180"},{"S14180","P29270","P08174","S08180"},{"S14180","P22270","P24200","P27180","S09180"},{"S14180","P29270","S10180"},{"S14180","P22270","P24340","P26270","P09180","S11180"},{"S14180","P22270","P23000","P21270","S12180"},{"S14000","P20323","P19270","P18180","S13180"},{"S14180"},{"S14180","P22270","S15180"},{"S14000","P20323","P19270","P17180"},{"S14000","P20323","P19270","P18180"},{"S14000","P20323","P19180"},{"S14000","P20323","P19270","P16180"},{"S14000","P20323","P19270","P15180"},{"S14000","P20323","P19270","P15214","P14180"},{"S14000","P20323","P19270","P15214","P14180","P01180"},{"S14180","P22270","P24340","P26270","P02180"},{"S14180","P32225","P31270","P04315","P03180"},{"S14180","P32225","P31270","P04180"},{"S14180","P32225","P31270","P05180"},{"S14180","P32225","P31270","P06180"},{"S14180","P32225","P31270","P07180"},{"S14180","P32225","P31270","P30180"},{"S14180","P32225","P31180"},{"S14180","P32180"},{"S14180","P29180"},{"S14180","P22180"},{"S14000","P20180"},{"S14000","P20323","P19270","P16180","P13180"},{"S14180","P22270","P23000","P21270","P12180"},{"S14180","P29270","P08000","P11180"},{"S14000","P20323","P19270","P16180","P13250","P10180"},{"S14180","P29270","P08180"},{"S14180","P22270","P23000","P21180"},{"S14180","P22270","P23180"},{"S14180","P22270","P24340","P25180"},{"S14180","P22270","P24180"},{"S14180","P22270","P24200","P27180"},{"S14180","P22270","P24340","P26180"},{"S14180","P22270","P24340","P26270","P09180"},{"S14180","P29270","P28180"},
{"S15270","P23000","P18270","C01180"},{"S15270","P24200","P27180","P07270","C02180"},{"S15270","P24200","P27180","P07090","C03180"},{"S15270","P24340","P25000","S01180"},{"S15270","P23000","P18270","S02180"},{"S15270","P23000","P18270","S03180"},{"S15270","P23000","P18270","S04180"},{"S15270","P23000","P18270","P15214","P14180","S05180"},{"S15270","P24340","P26270","P02000","S06180"},{"S15270","P24340","P26270","P02180","S07180"},{"S15270","P24200","P27180","P28270","P08174","S08180"},{"S15270","P24200","P27180","S09180"},{"S15270","P24200","P27180","P28090","S10180"},{"S15270","P24340","P26270","P09180","S11180"},{"S15270","P23000","P21270","S12180"},{"S15270","P23000","S13180"},{"S15090","P22000","S14180"},{"S15180"},{"S15270","P24340","P25000","P17180"},{"S15270","P23000","P18180"},{"S15090","P22000","P20323","P19180"},{"S15270","P24340","P25000","P17270","P16180"},{"S15270","P24340","P25000","P17270","P15180"},{"S15270","P24340","P25000","P17270","P15214","P14180"},{"S15270","P24340","P26270","P02000","P01180"},{"S15270","P24340","P26270","P02180"},{"S15270","P24200","P27180","P07270","P04315","P03180"},{"S15270","P24200","P27180","P07270","P04180"},{"S15270","P24200","P27180","P07270","P05180"},{"S15270","P24200","P27180","P07270","P06180"},{"S15270","P24200","P27180","P07180"},{"S15270","P23180","P30180"},{"S15090","P22180","P32225","P31180"},{"S15090","P22180","P32180"},{"S15090","P22180","P29180"},{"S15090","P22180"},{"S15090","P22000","P20180"},{"S15270","P23000","P21270","P12340","P13180"},{"S15270","P23000","P21270","P12180"},{"S15270","P23000","P21270","P12200","P11180"},{"S15270","P23000","P21270","P12200","P10180"},{"S15270","P24200","P27180","P28270","P08180"},{"S15270","P23000","P21180"},{"S15270","P23180"},{"S15270","P24340","P25180"},{"S15270","P24180"},{"S15270","P24200","P27180"},{"S15270","P24340","P26180"},{"S15270","P24340","P26270","P09180"},{"S15270","P24200","P27180","P28180"},
};

const int distanceTo[] = {0,974,962,222,185,75,115,291,391,541,720,915,1098,847,381,342,593,650,135,235,320,65,155,208,341,441,626,777,770,997,965,752,998,873,793,693,414,150,263,393,263,669,392,492,337,487,661,482,656,865,
974,0,300,1051,1048,938,748,433,333,183,420,360,552,360,1074,1196,1266,905,998,1098,1183,798,583,468,383,283,67,35,300,150,250,350,430,550,702,955,1346,728,840,636,538,471,1146,855,761,652,470,570,410,410,
962,300,0,747,1017,1029,1219,865,765,615,360,120,264,360,987,781,524,559,797,831,755,1169,1102,900,815,715,427,335,250,150,50,50,130,190,324,424,604,1004,768,576,768,411,731,509,508,364,230,359,410,170,
222,1051,747,0,120,132,322,589,689,836,1088,531,638,464,704,264,499,387,50,170,255,272,362,456,639,596,921,941,856,614,581,717,903,725,645,437,336,398,561,750,561,890,314,337,115,221,341,215,336,481,
185,1048,1017,120,0,110,300,558,658,808,1103,739,812,671,532,120,326,384,50,50,135,250,340,430,608,708,893,1097,1105,821,746,530,732,606,526,426,192,372,529,712,529,1053,170,270,235,365,514,359,509,689,
75,938,1029,132,110,0,190,399,499,649,875,760,911,692,511,252,485,542,60,160,245,140,230,298,449,549,734,906,925,842,810,662,890,765,685,585,324,240,371,522,371,825,302,402,247,379,531,374,526,710,
115,748,1219,322,300,190,0,126,226,376,688,1243,1128,831,356,480,758,816,250,350,435,50,40,70,176,276,461,578,739,886,986,890,1164,1038,958,858,552,132,241,367,241,638,530,630,475,653,860,647,643,1078,
291,433,865,589,558,399,126,0,100,250,540,1026,949,650,508,629,937,995,374,474,559,174,64,35,50,150,335,427,590,705,805,905,985,1216,1099,1037,701,249,369,243,138,489,679,779,624,832,751,557,492,899,
391,333,765,689,658,499,226,100,0,150,540,851,1021,506,508,802,1145,1088,518,618,703,318,184,135,50,50,235,307,590,561,661,761,841,1043,1171,1138,874,249,369,243,138,489,781,1038,602,805,607,437,372,801,
541,183,615,836,808,649,376,250,150,0,701,594,833,578,819,1061,1456,1192,734,834,919,534,364,285,200,100,85,127,534,345,445,545,625,784,983,1242,1133,465,628,459,318,749,1092,1142,674,891,679,497,432,644,
720,420,360,1088,1103,875,688,540,540,701,0,396,422,396,469,950,907,975,999,1000,1214,655,828,672,481,456,212,155,50,180,280,380,460,586,572,807,987,486,336,215,336,50,742,925,814,711,519,614,446,372,
915,360,120,531,739,760,1243,1026,851,594,396,0,120,396,956,574,644,386,590,624,850,920,1010,910,825,596,463,365,280,180,50,170,250,334,270,436,724,1104,850,644,850,372,524,336,335,220,110,215,336,50,
1098,552,264,638,812,911,1128,949,1021,833,422,120,0,501,979,612,400,418,628,662,606,966,1056,948,863,628,636,509,424,324,170,314,365,276,150,300,480,996,761,570,761,310,562,368,367,247,132,241,368,50,
847,360,360,464,671,692,831,650,506,578,396,396,501,0,1074,795,865,571,479,685,770,787,791,641,556,372,487,385,300,150,300,400,480,610,654,621,945,978,840,636,746,471,745,521,243,374,249,138,50,370,
381,1074,987,704,532,511,356,508,508,819,469,956,979,1074,0,388,897,597,514,438,627,251,401,503,377,562,747,659,470,684,784,708,945,977,897,647,783,149,55,143,249,370,273,448,792,609,819,1027,987,756,
342,1196,781,264,120,252,480,629,802,1061,950,574,612,795,388,0,365,240,170,50,162,370,460,574,780,880,1065,887,802,702,602,410,588,548,468,290,224,516,443,608,702,928,50,150,379,252,391,532,716,541,
593,1266,524,499,326,485,758,937,1145,1456,907,644,400,865,897,365,0,180,353,253,126,553,643,793,1044,1051,1135,925,840,740,640,540,370,280,200,100,80,736,858,1074,966,730,396,230,431,290,436,594,791,470,
650,905,559,387,384,542,816,995,1088,1192,975,386,418,571,597,240,180,0,446,280,342,747,837,1026,998,740,1020,829,744,644,436,372,346,260,180,50,260,801,599,796,1032,716,180,50,215,110,220,335,480,336,
};

/* ----------- CHANGE THE VARIABLES ABOVE WITH THE ONES GENERATED BY GraphGenerator.py, LOCATED IN pathing.txt -----------*/

//PID
#define DefaultSpeed 100 //Default Speed
int Speed = DefaultSpeed;
int P = 0, I = 0, D = 0, previousError = 0, PID = 0;
double Kp = 0.8, Ki = 0.01, Kd = 7;
double turningCoefficient = 0.9;

static void run()
{
    WheelLeft = 0;
    WheelRight = 0;
    LED = 0;
    P = DeltaDist;
    I = I + DeltaDist;
    D = DeltaDist-previousError;
    PID = (Kp*P) + (Ki*I) + (Kd*D);
    previousError = DeltaDist;
    WheelLeft = DefaultSpeed+PID;
    WheelRight = DefaultSpeed-PID; 
}

struct DeliveryItem
{
    int ItemID;
    int CenterID;
    int CollectionPtID;
    int Deadline;
    int ItemScore;
    int CurStatus; //1:at Center; 2:on Car; 3:at Station;
} DeliveryItemList[100]; //All Items

struct Route
{
    int calculatedTimeTotal;
    double worth;
    int pathing[7];
} fastestRoute;

void swap(int *a, int *b)
{
    int temp;
    temp = *a;
    *a = *b;
    *b = temp;
}

void permutation(int arr[7], int start, int end)
{
    if(start==end)
    {
        CalculateRoute(arr);
        return;
    }
    int i;
    for(i=start;i<=end;i++)
    {
        //swapping numbers
        swap((arr+i), (arr+start));
        //fixing one first digit
        //and calling permutation on
        //the rest of the digits
        permutation(arr, start+1, end);
        swap((arr+i), (arr+start));
    }
}

int CalculatePoints(int packageID, double timeTo)
{
    double overshotTime = (Time/100 + timeTo) - DeliveryItemList[packageID].Deadline;
    switch (DeliveryItemList[packageID].ItemScore)
    {
        case 20:
            return 20;
            break;
        case 30:
            if (overshotTime < 0) { return 30; }
            if (overshotTime > 20) { return 10; }
            return 30-overshotTime;
            break;
        case 60:
            if (overshotTime < 0) { return 60; }
            if (overshotTime > 25) { return 10; }
            return 60-2*overshotTime;
            break;
        case 90:
            if (overshotTime < 0) { return 90; }
            if (overshotTime > 26) { return 10; }
            return 90-3*overshotTime;
            break;
    }
}

void CalculateRoute(int arr[7])
{
    double runningTime = 2;
    int runningPoints = 0;

    //this is a bit of a cheaty hashmap ish solution
    int visited[20] = {0};
    for (int i = 0;i < 7;i ++)
    {
        int distToNext;
        if (i == 0)
        {
            distToNext = distanceTo[0 * amountOfNodes + DeliveryItemList[arr[i]].CollectionPtID+2];
        }
        else if (arr[i] == -1)
        {
            distToNext = distanceTo[(DeliveryItemList[arr[i-1]].CollectionPtID+2) * amountOfNodes + 0];
        }
        else
        {
            distToNext = distanceTo[(DeliveryItemList[arr[i-1]].CollectionPtID+2) * amountOfNodes + DeliveryItemList[arr[i]].CollectionPtID+2];
        }
                
        runningTime += (double)distToNext / averageSpeed;
        //for delivery or pickup

        if (arr[i] == -1) { break; }
        runningTime += 2;

        //have not deposited
        if (visited[DeliveryItemList[arr[i]].CollectionPtID] != 1) 
        {
            //to account for multiple packages being dropped off at the same station
            for (int j = 0;j < 6;j++)
            {
                if (DeliveryItemList[onCar[j]].CollectionPtID == DeliveryItemList[arr[i]].CollectionPtID)
                {
                    runningPoints += CalculatePoints(onCar[j], runningTime);                     
                }
            }
        }
        visited[DeliveryItemList[arr[i]].CollectionPtID] = 1;
    }

    double worth = runningPoints - bruteForceTimeCoefficient * runningTime;

    if (worth > fastestRoute.worth)
    {
        fastestRoute.calculatedTimeTotal = runningTime;
        fastestRoute.worth = worth;
        memcpy(fastestRoute.pathing, arr, sizeof(fastestRoute.pathing));
    }
}

void BruteForceBestPath()
{
    int bruteForcePts[7];
    memcpy(bruteForcePts, onCar, sizeof(bruteForcePts));
    bruteForcePts[6] = -1;
    fastestRoute.worth = -999999;

    permutation(bruteForcePts, 0, 6);
    printf("\n");
    printf("best stn path is, with worth of %f, ", fastestRoute.worth);
    for (int i = 0;i < 7;i++)
    {
        if (fastestRoute.pathing[i] == -1) {printf("C01"); break; }
        printf("%i, ", DeliveryItemList[fastestRoute.pathing[i]].CollectionPtID);
    }
    printf("\n");
}

//calculates the difference in angle, +\- with respect to start facing
int calculateAngleDiff(int start, int end)
{
    int angleDiff = (end - start);
    if (angleDiff > 180) { return angleDiff - 360; }
    else if (angleDiff < -180) { return angleDiff + 360; }
    return angleDiff;
}

int CurvedTurnTo(int curRot, int targetRot, double turningCoefficient)
{
    int highSpeed = Speed;
    int angularErrorThreshold = 20;
    double angleDiff = (double)calculateAngleDiff(curRot, targetRot);

    //if turning is done
    if (angleDiff <= angularErrorThreshold && angleDiff >= -angularErrorThreshold)
    {
        Duration = 0;
        return 1;
    }
    //turning right
    if (angleDiff < 0)
    {
        WheelLeft = highSpeed;
        WheelRight = highSpeed-(abs(angleDiff) * turningCoefficient);
    }
    //turning left  
    else
    {
        WheelLeft = (int)(highSpeed-(abs(angleDiff) * turningCoefficient));
        WheelRight = highSpeed;
    }
    Duration = 128;
    return 1;
}

char TaskString[256];//For Individual Challenge ONLY
struct Task
{
    int TaskID;
    int StationID;
    int ActionID;
} TaskList[10];//For Individual Challenge ONLY

DLL_EXPORT int  GetGameID()
{
    return CurGame;
}
DLL_EXPORT int GetCurAction()
{
    return CurAction;
}
DLL_EXPORT void SetTaskString(char* gameTask)
{
    strcpy(TaskString, gameTask);
    printf(gameTask);
    printf("\r\n");
}
DLL_EXPORT void AddTaskItem(int TaskID, int StationID, int ActionID)
{
    if (TaskID < 0 || TaskID >= 10) return;
    TaskList[TaskID].TaskID = TaskID;
    TaskList[TaskID].StationID = StationID;
    TaskList[TaskID].ActionID = ActionID;
    printf("Task:(TaskID:%d, StID:%d, ActID:%d)\r\n", TaskID, StationID, ActionID);
}

int iTurnToGoAhead = 0;
int TurnTo(int curRot, int targetRot)
{
    int angularErrorThreshold = 20;
    int minTuningSpeed = 4;
    int angleDiff = (curRot - targetRot + 360) % 360;
    int turningSpeed;
   
    Duration = 128;
    //SuperDuration = 128; //Uncomment this statement for super Action.

    if (iTurnToGoAhead > 0)
    {
        iTurnToGoAhead = iTurnToGoAhead + 1;
        WheelLeft = 100;
        WheelRight = 100;
        if (iTurnToGoAhead > 8) //Stop this turning action after go ahead 8 time units. 
        {
            Duration = 0;
            //SuperDuration = 0;//Uncomment this statement for super Action.
            iTurnToGoAhead = 0;
            return 0;
        }
        return 1;
    }

    if (angleDiff <= angularErrorThreshold || angleDiff > 360 - angularErrorThreshold)
        turningSpeed = 0;
    else if (angleDiff <= 180)
        turningSpeed = angleDiff / 2 + minTuningSpeed;
    else
        turningSpeed = (angleDiff - 360) / 2 - minTuningSpeed;
    WheelLeft = turningSpeed;
    WheelRight = -WheelLeft;
  
    if (turningSpeed == 0) //Reach the targetRot, continue to go ahead.
        iTurnToGoAhead = 1;

    return 1;
}
DLL_EXPORT void AddDeliveryItem(int ItemID, int CenterID, int StationID, int ItemScore, int Deadline, int CurStatus)
{
    if (ItemID < 0 || ItemID>99) {
        printf("ItemID Error! ID = %d", ItemID);
        return;
    }
    DeliveryItemList[ItemID].ItemID = ItemID;
    DeliveryItemList[ItemID].CenterID = CenterID;
    DeliveryItemList[ItemID].CollectionPtID = StationID;
    DeliveryItemList[ItemID].ItemScore = ItemScore;
    DeliveryItemList[ItemID].Deadline = Deadline;
    DeliveryItemList[ItemID].CurStatus = CurStatus;
}
DLL_EXPORT void RequestItems(int* Items)
{
    for (int i = 0; i < 6; i++)
    {
        Items[i] = -1;
    }
}

void GameStart()
{
//Add your code here 
}

int firstLoaded = 0; 
void AILoopStart()
{
//Add your code here

    if (!firstLoaded)
    {
        firstLoaded = 1;

        for(int i = 0; i < 6; i++)
        {
            if(onCar[i] == -1)
            {
                onCar[i] = nextParcelID;
                nextParcelID++;
            }
        }
        BruteForceBestPath();
        for (int i = 1; i < 8; i++)
        {
            if (fastestRoute.pathing[i-1] == -1)
            {
                route[i] = 0;
                break;
            }
            route[i] = DeliveryItemList[fastestRoute.pathing[i-1]].CollectionPtID + 2; 
            printf("%i, ", route[i]);
        }

        printf("\n");
/*
        route[0] = 0;
        route[1] = 10;
        route[2] = 14;
        route[3] = 0;*/
        
        routeIndex = 1;
        pathIndex = 0;
        start = route[0]; 
        end = route[routeIndex]; 

        CurAction = 1;
    }
}

DLL_EXPORT char* GetTeamName()
{
     return "Robo_Erectus";
}
char info[3000];
DLL_EXPORT char* GetDebugInfo()
{
    sprintf(info, "Duration=%d;CurAction=%d;CurGame=%d;US_Front=%d;US_Left=%d;US_Right=%d;PositionX=%d;PositionY=%d;RotationZ=%d;DeltaAngle=%d;DeltaDist=%d;NavID=%d;NavDist=%d;CtrID=%d;CtrDist=%d;StnID=%d;StnDist=%d;Time=%d;MyState=%d;WheelLeft=%d;WheelRight=%d;LED=%d;",Duration,CurAction,CurGame,US_Front,US_Left,US_Right,PositionX,PositionY,RotationZ,DeltaAngle,DeltaDist,NavID,NavDist,CtrID,CtrDist,StnID,StnDist,Time,MyState,WheelLeft,WheelRight,LED);
    return info;
}
DLL_EXPORT void SetGameID(int GameID)
{
    int i = 0;
    if (CurGame != GameID)
    {
        GameStart();
        for (i = 0; i < 100; i++)
        {
            DeliveryItemList[i].ItemID = i;
            DeliveryItemList[i].CenterID = -1;
            DeliveryItemList[i].CollectionPtID = 0;
            DeliveryItemList[i].Deadline = 0;
            DeliveryItemList[i].ItemScore = 0;
            DeliveryItemList[i].CurStatus = 0;
        }
        for (i = 0; i < 10; i++)
        {
            TaskList[i].TaskID = i;
            TaskList[i].StationID = 0;
            TaskList[i].ActionID = 0;
        }
    }
    CurGame = GameID;
}
DLL_EXPORT void SetDataAI(volatile int* packet, volatile int *AI_IN)
{

    int sum = 0;

    US_Front = AI_IN[0]; packet[0] = US_Front; sum += US_Front;
    US_Left = AI_IN[1]; packet[1] = US_Left; sum += US_Left;
    US_Right = AI_IN[2]; packet[2] = US_Right; sum += US_Right;
    PositionX = AI_IN[3]; packet[3] = PositionX; sum += PositionX;
    PositionY = AI_IN[4]; packet[4] = PositionY; sum += PositionY;
    RotationZ = AI_IN[5]; packet[5] = RotationZ; sum += RotationZ;
    DeltaAngle = AI_IN[6]; packet[6] = DeltaAngle; sum += DeltaAngle;
    DeltaDist = AI_IN[7]; packet[7] = DeltaDist; sum += DeltaDist;
    NavID = AI_IN[8]; packet[8] = NavID; sum += NavID;
    NavDist = AI_IN[9]; packet[9] = NavDist; sum += NavDist;
    CtrID = AI_IN[10]; packet[10] = CtrID; sum += CtrID;
    CtrDist = AI_IN[11]; packet[11] = CtrDist; sum += CtrDist;
    StnID = AI_IN[12]; packet[12] = StnID; sum += StnID;
    StnDist = AI_IN[13]; packet[13] = StnDist; sum += StnDist;
    Time = AI_IN[14]; packet[14] = Time; sum += Time;
    MyState = AI_IN[15]; packet[15] = MyState; sum += MyState;
    packet[16] = sum;

}
DLL_EXPORT void GetCommand(int *AI_OUT)
{
    AI_OUT[0] = WheelLeft;
    AI_OUT[1] = WheelRight;
    AI_OUT[2] = LED;
    AI_OUT[3] = MyState;
}

/*
//David's Non-important Functions
int checkForRoundabout(int arr[], int var)
{

    for (int i = 0; i < sizeof(arr) / arr[0]); i++)
    {
        if (var == arr[i])
            return 1;
    }
    printf("var = %d\n", var);
    return 0;
}*/

void Game0()
{
    route[0] = 0; //Set the first point of the route to C01 so that it can pick up the delivery
    
    Speed = DefaultSpeed;
    
    char value[] = {pathings[start * amountOfNodes + end][pathIndex][1], pathings[start * amountOfNodes + end][pathIndex][2], '\0'} ;
    pathID = atoi(value);
    char value2[] = {pathings[start * amountOfNodes + end][pathIndex][3], pathings[start * amountOfNodes + end][pathIndex][4], pathings[start * amountOfNodes + end][pathIndex][5], '\0'} ;
    angle = atoi(value2);

    if(Duration>0)
    {
        Duration--;
    }
    //Collect from Distrubution Centre
    else if(CtrID == route[routeIndex] + 1 && CtrDist <= 10)
    {
        //printf("Collecting\n");
        for(int i = 0; i < 6; i++)
        {
            if(onCar[i] == -1)
            {
                onCar[i] = nextParcelID;
                nextParcelID++;
            }
        }
        BruteForceBestPath();
        for (int i = 1; i < 8; i++)
        {
            if (fastestRoute.pathing[i-1] == -1)
            {
                route[i] = 0;
                break;
            }
            route[i] = DeliveryItemList[fastestRoute.pathing[i-1]].CollectionPtID + 2; 
        }

        routeIndex = 1;
        pathIndex = 0;
        start = route[0]; 
        end = route[routeIndex]; 

        CurAction = 1;
        Duration = 80;
    }
    //Deliver to Collection Station
    else if(StnID == route[routeIndex] - 2 && StnDist >= 0 && StnDist <= 15)
    {
        //printf("Delivering\n");
        routeIndex++;
        pathIndex = 0;
        start = route[routeIndex - 1];
        end = route[routeIndex];

        for (int i = 0; i < 6; i++)
        {
            if(StnID == DeliveryItemList[onCar[i]].CollectionPtID)
                onCar[i] = -1;
        }

        CurAction = 1;
        Duration = 80;
    }
    //Smooth turn 
    else if(NavID == pathID && pathings[start * amountOfNodes + end][pathIndex][0] == 'P' && NavDist <= 15) //Edge IDs: && (NavID == 14 || NavID == 15 || NavID == 19 || NavID == 20 || NavID == 31 || NavID == 32 || NavID == 3 || NavID == 4))
    {
        //printf("Edge Turning\n");
        pathIndex++;
        turningAngle = angle;
        turningCoefficient = 1.1;

        CurAction = 2;
        Duration = 0;         
    }
    //Turn after collecting
    else if(CtrID == pathID && pathings[start * amountOfNodes + end][pathIndex][0] == 'C' && CtrDist >= -10 && CtrDist <= 10)
    {
        //printf("Turning after collecting\n");
        pathIndex++;
        turningAngle = angle;

        CurAction = 3;
        Duration = 0;        
    }
    //Turn after delivering
    else if(StnID == pathID && pathings[start * amountOfNodes + end][pathIndex][0] == 'S' && StnDist >= -10 && StnDist <= 10)
    {
        //printf("Turning after delivering\n");
        pathIndex++;
        turningAngle = angle;

        CurAction = 3;
        Duration = 0;        
    }
    //Move
    else if(true)
    {
        Duration = 0; 
        CurAction = 4;
    }

    switch(CurAction)
    {
        case 1: //Deliver/Collect
            WheelLeft = 0;
            WheelRight = 0;

            LED = 1;
            break;
        case 2: //Smooth Turn
            CurvedTurnTo(RotationZ, turningAngle, turningCoefficient);
           // printf("TurningAngle: %d\n", turningAngle);
            LED = 0;
            break;
        case 3: //Turn
            TurnTo(RotationZ, turningAngle);
            //printf("TurningAngle: %d\n", turningAngle);
            LED = 0;
            break;
        case 4: //Move
            run();
            break;
        default:
            break;
    }

}

DLL_EXPORT void AILoop()
{
    AILoopStart();
    switch (CurGame)
    {
    case 0:
        Game0();
        break;
    default:
        WheelLeft=0;
        WheelRight=0;
        LED=0;
        MyState=0;
        break;
    }
}