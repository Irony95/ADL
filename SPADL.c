/////////////////////////////////////////////////////////////////////////
//                                                                     //
//	CoSpace Robot                                                      //
//	Version 2.0.0                                                      //
//	DEC 16 2022                                                        //
//	Copyright (C) 2022 CoSpace Robot. All Rights Reserved              //
//                                                                     //
//  ONLY C Code can be compiled.                                       //
//                                                                     //
/////////////////////////////////////////////////////////////////////////

#define CsBot_AI_H//DO NOT delete this line
#ifndef CSBOT_REAL
#include <stdio.h>
#include <windows.h>
#include <stdlib.h>
#include <math.h>
#define DLL_EXPORT extern __declspec(dllexport)
#define false 0
#define true 1
#endif
int Duration = 0;
int CurAction = -1;
int CurGame = 0;
int US_Front = 0;
int US_Left = 0;
int US_Right = 0;
int PositionX = 0;
int PositionY = 0;
int RotationZ = 0;
int DeltaAngle = 0;
int DeltaDist = 0;
int NavID = 0;
int NavDist = 0;
int CtrID = 0;
int CtrDist = 0;
int StnID = 0;
int StnDist = 0;
int Time = 0;
int MyState = 0;
int WheelLeft = 0;
int WheelRight = 0;
int LED = 0;
int AI_TeamID = 1;   //Robot Team ID.    1:Blue Ream;    2:Red Team.
int AI_SensorNum = 15;
int a[100],b[100],c[100],d[100];

// set loadedPoints if we want to load pathing locally, otherwise set to 0 to read from file
//loading is from the file located at [C:\CoSpaceRobot Studio\ADL-2023\ADL\Bin\path.txt]
int loadedPoints = 0;
int stationsToVisit[1000] = {};
int nextStation = 1;

int pathingIndex = 1;

const char *pathings[][50] = {
{"C01180"},{"C01270","P15214","P14180","P03135","P04090","C02180"},{"C01090","P17180","P25225","P26139","P27180","P07090","C03180"},{"C01090","P17180","S01180"},{"C01090","S02180"},{"C01090","S03180"},{"C01270","S04180"},{"C01270","P15214","P14180","S05180"},{"C01270","P15214","P14180","S06180"},{"C01270","P15214","P14180","S07180"},{"C01270","P16180","P13139","P12225","P11180","S08180"},{"C01090","P17180","P25225","P26139","P27180","S09180"},{"C01090","P19143","P20180","P29270","S10180"},{"C01090","P17180","P25225","P26270","P09180","S11180"},{"C01270","P16180","P13139","P12090","S12180"},{"C01090","P18180","S13180"},{"C01090","P19143","P20180","S14180"},{"C01090","P17180","P25131","P24090","S15180"},{"C01090","P17180"},{"C01090","P18180"},{"C01090","P19180"},{"C01270","P16180"},{"C01270","P15180"},{"C01270","P15214","P14180"},{"C01270","P15214","P14180","P01180"},{"C01270","P15214","P14180","P02180"},{"C01270","P15214","P14180","P03180"},{"C01270","P15214","P14180","P03135","P04180"},{"C01270","P16180","P13139","P12225","P11180","P05180"},{"C01090","P17180","P25225","P26270","P09180","P06180"},{"C01090","P17180","P25225","P26139","P27180","P07180"},{"C01090","P17180","P25131","P24090","P23180","P30180"},{"C01090","P19143","P20180","P32225","P31180"},{"C01090","P19143","P20180","P32180"},{"C01090","P19143","P20180","P29180"},{"C01090","P19143","P20180","P22180"},{"C01090","P19143","P20180"},{"C01270","P16180","P13180"},{"C01270","P16180","P13139","P12180"},{"C01270","P16180","P13139","P12225","P11180"},{"C01270","P16180","P13221","P10180"},{"C01270","P16180","P13139","P12225","P11180","P08180"},{"C01090","P18180","P21180"},{"C01090","P17180","P25131","P24090","P23180"},{"C01090","P17180","P25180"},{"C01090","P17180","P25131","P24180"},{"C01090","P17180","P25225","P26139","P27180"},{"C01090","P17180","P25225","P26180"},{"C01090","P17180","P25225","P26270","P09180"},{"C01090","P17180","P25225","P26139","P27180","P28180"},
{"C02270","P04315","P03000","P14034","P15090","C01180"},{"C02180"},{"C02090","C03180"},{"C02090","P06000","P09090","P26045","P25000","S01180"},{"C02270","P04315","P03000","P14034","P15090","S02180"},{"C02270","P04315","P03000","P14034","P15090","S03180"},{"C02270","P04315","P03000","P14034","P15090","S04180"},{"C02270","P04315","P03000","S05180"},{"C02270","P04315","P03000","S06180"},{"C02270","P04315","P03000","S07180"},{"C02090","P06270","P05006","S08180"},{"C02090","P07000","S09180"},{"C02090","P07000","P28090","S10180"},{"C02090","P06000","S11180"},{"C02090","P06270","P05006","S08354","P08000","P11045","P12090","S12180"},{"C02090","P07000","P27045","P24090","P23000","S13180"},{"C02090","P07000","P28090","P29000","S14180"},{"C02090","P07000","P27045","P24090","S15180"},{"C02270","P04315","P03000","P14034","P15090","P17180"},{"C02270","P04315","P03000","P14034","P15090","P18180"},{"C02270","P04315","P03000","P14034","P15090","P19180"},{"C02270","P04315","P03000","P14034","P15090","P16180"},{"C02270","P04315","P03000","P14034","P15180"},{"C02270","P04315","P03000","P14180"},{"C02270","P04315","P03000","P01180"},{"C02270","P04315","P03000","P02180"},{"C02270","P04315","P03180"},{"C02270","P04180"},{"C02090","P06270","P05180"},{"C02090","P06180"},{"C02090","P07180"},{"C02090","P30180"},{"C02090","P31180"},{"C02090","P31045","P32180"},{"C02090","P07000","P28090","P29180"},{"C02090","P07000","P28090","P29000","P22180"},{"C02090","P07000","P28090","P29000","P20180"},{"C02270","P04315","P03000","P01090","P10041","P13180"},{"C02090","P06270","P05006","S08354","P08000","P11045","P12180"},{"C02090","P06270","P05006","S08354","P08000","P11180"},{"C02270","P04315","P03000","P01090","P10180"},{"C02090","P06270","P05006","S08354","P08180"},{"C02090","P07000","P27045","P24090","P23000","P21180"},{"C02090","P07000","P27045","P24090","P23180"},{"C02090","P06000","P09090","P26045","P25180"},{"C02090","P07000","P27045","P24180"},{"C02090","P07000","P27180"},{"C02090","P06000","P09090","P26180"},{"C02090","P06000","P09180"},{"C02090","P07000","P28180"},
{"C03270","P07000","P27319","P26045","P25000","P17270","C01180"},{"C03270","C02180"},{"C03180"},{"C03270","P07000","P27319","P26045","P25000","S01180"},{"C03270","P07000","P27319","P26045","P25000","P17090","S02180"},{"C03270","P07000","P27319","P26045","P25000","P17270","S03180"},{"C03270","P07000","P27319","P26045","P25000","P17270","S04180"},{"C03270","P04315","P03000","S05180"},{"C03270","P04315","P03000","S06180"},{"C03270","P04315","P03000","S07180"},{"C03270","P05006","S08180"},{"C03270","P07000","S09180"},{"C03270","P07000","P28090","S10180"},{"C03270","P06000","S11180"},{"C03270","P05006","S08354","P08000","P11045","P12090","S12180"},{"C03270","P07000","P27045","P24090","P23000","S13180"},{"C03090","P31045","P32000","S14180"},{"C03090","P31045","P32000","P22270","S15180"},{"C03270","P07000","P27319","P26045","P25000","P17180"},{"C03270","P07000","P27045","P24090","P23000","P18180"},{"C03090","P31045","P32000","P20323","P19180"},{"C03270","P07000","P27319","P26045","P25000","P17270","P16180"},{"C03270","P04315","P03000","P14034","P15180"},{"C03270","P04315","P03000","P14180"},{"C03270","P04315","P03000","P01180"},{"C03270","P04315","P03000","P02180"},{"C03270","P04315","P03180"},{"C03270","P04180"},{"C03270","P05180"},{"C03270","P06180"},{"C03270","P07180"},{"C03090","P30180"},{"C03090","P31180"},{"C03090","P31045","P32180"},{"C03090","P31045","P32000","P29180"},{"C03090","P31045","P32000","P22180"},{"C03090","P31045","P32000","P20180"},{"C03270","P05006","S08354","P08000","P11045","P12319","P13180"},{"C03270","P05006","S08354","P08000","P11045","P12180"},{"C03270","P05006","S08354","P08000","P11180"},{"C03270","P05006","S08354","P08000","P11315","P10180"},{"C03270","P05006","S08354","P08180"},{"C03270","P07000","P27045","P24090","P23000","P21180"},{"C03270","P07000","P27045","P24090","P23180"},{"C03270","P07000","P27319","P26045","P25180"},{"C03270","P07000","P27045","P24180"},{"C03270","P07000","P27180"},{"C03270","P07000","P27319","P26180"},{"C03270","P06000","P09180"},{"C03270","P07000","P28180"},
{"S01000","P17270","C01180"},{"S01180","P25225","P26270","P09180","P06270","C02180"},{"S01180","P25225","P26139","P27180","P07090","C03180"},{"S01180"},{"S01000","P17090","S02180"},{"S01000","P17270","S03180"},{"S01000","P17270","S04180"},{"S01000","P17270","P15214","P14180","S05180"},{"S01000","P17270","P15214","P14180","S06180"},{"S01180","P25225","P26270","P02180","S07180"},{"S01180","P25225","P26270","P09180","P06270","P05006","S08180"},{"S01180","P25225","P26139","P27180","S09180"},{"S01180","P25225","P26139","P27180","P28090","S10180"},{"S01180","P25225","P26270","P09180","S11180"},{"S01000","P17090","P18180","P21270","S12180"},{"S01000","P17090","P18180","S13180"},{"S01000","P17090","P19143","P20180","S14180"},{"S01180","P25131","P24090","S15180"},{"S01000","P17180"},{"S01000","P17090","P18180"},{"S01000","P17090","P19180"},{"S01000","P17270","P16180"},{"S01000","P17270","P15180"},{"S01000","P17270","P15214","P14180"},{"S01000","P17270","P15214","P14180","P01180"},{"S01180","P25225","P26270","P02180"},{"S01180","P25225","P26270","P02180","P03180"},{"S01180","P25225","P26270","P09180","P06270","P04180"},{"S01180","P25225","P26270","P09180","P06270","P05180"},{"S01180","P25225","P26270","P09180","P06180"},{"S01180","P25225","P26139","P27180","P07180"},{"S01180","P25131","P24090","P23180","P30180"},{"S01180","P25131","P24090","P23180","P30090","P31180"},{"S01180","P25131","P24090","P22180","P32180"},{"S01180","P25131","P24090","P22180","P29180"},{"S01180","P25131","P24090","P22180"},{"S01000","P17090","P19143","P20180"},{"S01000","P17270","P16180","P13180"},{"S01000","P17270","P16180","P13139","P12180"},{"S01000","P17270","P16180","P13139","P12225","P11180"},{"S01000","P17270","P16180","P13221","P10180"},{"S01180","P25225","P26139","P27180","P28270","P08180"},{"S01000","P17090","P18180","P21180"},{"S01180","P25131","P24090","P23180"},{"S01180","P25180"},{"S01180","P25131","P24180"},{"S01180","P25225","P26139","P27180"},{"S01180","P25225","P26180"},{"S01180","P25225","P26270","P09180"},{"S01180","P25225","P26139","P27180","P28180"},
{"S02270","C01180"},{"S02270","P15214","P14180","P03135","P04090","C02180"},{"S02270","P17180","P25225","P26139","P27180","P07090","C03180"},{"S02270","P17180","S01180"},{"S02180"},{"S02270","S03180"},{"S02270","S04180"},{"S02270","P15214","P14180","S05180"},{"S02270","P15214","P14180","S06180"},{"S02270","P15214","P14180","S07180"},{"S02270","P16180","P13139","P12225","P11180","S08180"},{"S02270","P17180","P25225","P26139","P27180","S09180"},{"S02090","P19143","P20180","P29270","S10180"},{"S02270","P17180","P25225","P26270","P09180","S11180"},{"S02090","P18180","P21270","S12180"},{"S02090","P18180","S13180"},{"S02090","P19143","P20180","S14180"},{"S02090","P19143","P20180","P22270","S15180"},{"S02270","P17180"},{"S02090","P18180"},{"S02090","P19180"},{"S02270","P16180"},{"S02270","P15180"},{"S02270","P15214","P14180"},{"S02270","P15214","P14180","P01180"},{"S02270","P15214","P14180","P02180"},{"S02270","P15214","P14180","P03180"},{"S02270","P15214","P14180","P03135","P04180"},{"S02270","P17180","P25225","P26270","P09180","P06270","P05180"},{"S02270","P17180","P25225","P26270","P09180","P06180"},{"S02270","P17180","P25225","P26139","P27180","P07180"},{"S02270","P17180","P25131","P24090","P23180","P30180"},{"S02090","P19143","P20180","P32225","P31180"},{"S02090","P19143","P20180","P32180"},{"S02090","P19143","P20180","P29180"},{"S02090","P19143","P20180","P22180"},{"S02090","P19143","P20180"},{"S02270","P16180","P13180"},{"S02270","P16180","P13139","P12180"},{"S02270","P16180","P13139","P12225","P11180"},{"S02270","P16180","P13221","P10180"},{"S02270","P16180","P13139","P12225","P11180","P08180"},{"S02090","P18180","P21180"},{"S02270","P17180","P25131","P24090","P23180"},{"S02270","P17180","P25180"},{"S02270","P17180","P25131","P24180"},{"S02270","P17180","P25225","P26139","P27180"},{"S02270","P17180","P25225","P26180"},{"S02270","P17180","P25225","P26270","P09180"},{"S02270","P17180","P25225","P26139","P27180","P28180"},
{"S03270","C01180"},{"S03270","P15214","P14180","P03135","P04090","C02180"},{"S03090","P17180","P25225","P26139","P27180","P07090","C03180"},{"S03090","P17180","S01180"},{"S03090","S02180"},{"S03180"},{"S03270","S04180"},{"S03270","P15214","P14180","S05180"},{"S03270","P15214","P14180","S06180"},{"S03270","P15214","P14180","S07180"},{"S03270","P16180","P13139","P12225","P11180","S08180"},{"S03090","P17180","P25225","P26139","P27180","S09180"},{"S03090","P17180","P25225","P26139","P27180","P28090","S10180"},{"S03090","P17180","P25225","P26270","P09180","S11180"},{"S03270","P16180","P13139","P12090","S12180"},{"S03090","P18180","S13180"},{"S03090","P19143","P20180","S14180"},{"S03090","P17180","P25131","P24090","S15180"},{"S03090","P17180"},{"S03090","P18180"},{"S03090","P19180"},{"S03270","P16180"},{"S03270","P15180"},{"S03270","P15214","P14180"},{"S03270","P15214","P14180","P01180"},{"S03270","P15214","P14180","P02180"},{"S03270","P15214","P14180","P03180"},{"S03270","P15214","P14180","P03135","P04180"},{"S03270","P16180","P13139","P12225","P11180","P05180"},{"S03090","P17180","P25225","P26270","P09180","P06180"},{"S03090","P17180","P25225","P26139","P27180","P07180"},{"S03090","P17180","P25131","P24090","P23180","P30180"},{"S03090","P19143","P20180","P32225","P31180"},{"S03090","P19143","P20180","P32180"},{"S03090","P19143","P20180","P29180"},{"S03090","P19143","P20180","P22180"},{"S03090","P19143","P20180"},{"S03270","P16180","P13180"},{"S03270","P16180","P13139","P12180"},{"S03270","P16180","P13139","P12225","P11180"},{"S03270","P16180","P13221","P10180"},{"S03270","P16180","P13139","P12225","P11180","P08180"},{"S03090","P18180","P21180"},{"S03090","P17180","P25131","P24090","P23180"},{"S03090","P17180","P25180"},{"S03090","P17180","P25131","P24180"},{"S03090","P17180","P25225","P26139","P27180"},{"S03090","P17180","P25225","P26180"},{"S03090","P17180","P25225","P26270","P09180"},{"S03090","P17180","P25225","P26139","P27180","P28180"},
{"S04090","C01180"},{"S04270","P15214","P14180","P03135","P04090","C02180"},{"S04090","P17180","P25225","P26139","P27180","P07090","C03180"},{"S04090","P17180","S01180"},{"S04090","S02180"},{"S04090","S03180"},{"S04180"},{"S04270","P15214","P14180","S05180"},{"S04270","P15214","P14180","S06180"},{"S04270","P15214","P14180","S07180"},{"S04090","P16180","P13139","P12225","P11180","S08180"},{"S04090","P17180","P25225","P26139","P27180","S09180"},{"S04090","P19143","P20180","P29270","S10180"},{"S04270","P15214","P14180","P02090","P09180","S11180"},{"S04090","P16180","P13139","P12090","S12180"},{"S04090","P18180","S13180"},{"S04090","P19143","P20180","S14180"},{"S04090","P17180","P25131","P24090","S15180"},{"S04090","P17180"},{"S04090","P18180"},{"S04090","P19180"},{"S04090","P16180"},{"S04270","P15180"},{"S04270","P15214","P14180"},{"S04270","P15214","P14180","P01180"},{"S04270","P15214","P14180","P02180"},{"S04270","P15214","P14180","P03180"},{"S04270","P15214","P14180","P03135","P04180"},{"S04090","P16180","P13139","P12225","P11180","P05180"},{"S04270","P15214","P14180","P03135","P04090","P06180"},{"S04270","P15214","P14180","P03135","P04090","P07180"},{"S04270","P15214","P14180","P03135","P04090","P30180"},{"S04270","P15214","P14180","P03135","P04090","P31180"},{"S04090","P19143","P20180","P32180"},{"S04090","P19143","P20180","P29180"},{"S04090","P19143","P20180","P22180"},{"S04090","P19143","P20180"},{"S04090","P16180","P13180"},{"S04090","P16180","P13139","P12180"},{"S04090","P16180","P13139","P12225","P11180"},{"S04090","P16180","P13221","P10180"},{"S04090","P16180","P13139","P12225","P11180","P08180"},{"S04090","P18180","P21180"},{"S04090","P17180","P25131","P24090","P23180"},{"S04090","P17180","P25180"},{"S04090","P17180","P25131","P24180"},{"S04090","P17180","P25225","P26139","P27180"},{"S04090","P17180","P25225","P26180"},{"S04270","P15214","P14180","P02090","P09180"},{"S04090","P17180","P25225","P26139","P27180","P28180"},
{"S05000","P14034","P15090","C01180"},{"S05180","P03135","P04090","C02180"},{"S05180","P03135","P04090","C03180"},{"S05000","P14034","P15090","P17180","S01180"},{"S05000","P14034","P15090","S02180"},{"S05000","P14034","P15090","S03180"},{"S05000","P14034","P15090","S04180"},{"S05180"},{"S05180","S06180"},{"S05180","S07180"},{"S05180","P01090","P10135","P11180","S08180"},{"S05180","P03135","P04090","P07000","S09180"},{"S05180","P01090","P10135","P11180","P08090","S10180"},{"S05180","P02090","P09180","S11180"},{"S05180","P01090","P10135","P11045","P12090","S12180"},{"S05000","P14034","P15090","P18180","S13180"},{"S05000","P14034","P15090","P19143","P20180","S14180"},{"S05000","P14034","P15090","P17180","P25131","P24090","S15180"},{"S05000","P14034","P15090","P17180"},{"S05000","P14034","P15090","P18180"},{"S05000","P14034","P15090","P19180"},{"S05000","P14034","P15090","P16180"},{"S05000","P14034","P15180"},{"S05000","P14180"},{"S05180","P01180"},{"S05180","P02180"},{"S05180","P03180"},{"S05180","P03135","P04180"},{"S05180","P01090","P10135","P11180","P05180"},{"S05180","P03135","P04090","P06180"},{"S05180","P03135","P04090","P07180"},{"S05180","P03135","P04090","P30180"},{"S05180","P03135","P04090","P31180"},{"S05180","P03135","P04090","P31045","P32180"},{"S05000","P14034","P15090","P19143","P20180","P29180"},{"S05000","P14034","P15090","P19143","P20180","P22180"},{"S05000","P14034","P15090","P19143","P20180"},{"S05180","P01090","P10041","P13180"},{"S05180","P01090","P10135","P11045","P12180"},{"S05180","P01090","P10135","P11180"},{"S05180","P01090","P10180"},{"S05180","P01090","P10135","P11180","P08180"},{"S05000","P14034","P15090","P18180","P21180"},{"S05000","P14034","P15090","P17180","P25131","P24090","P23180"},{"S05000","P14034","P15090","P17180","P25180"},{"S05000","P14034","P15090","P17180","P25131","P24180"},{"S05180","P02090","P26139","P27180"},{"S05180","P02090","P26180"},{"S05180","P02090","P09180"},{"S05180","P01090","P10135","P11180","P08090","P28180"},
{"S06000","P14034","P15090","C01180"},{"S06180","P03135","P04090","C02180"},{"S06180","P03135","P04090","C03180"},{"S06000","P14034","P15090","P17180","S01180"},{"S06000","P14034","P15090","S02180"},{"S06000","P14034","P15090","S03180"},{"S06000","P14034","P15090","S04180"},{"S06000","S05180"},{"S06180"},{"S06180","S07180"},{"S06000","P01090","P10135","P11180","S08180"},{"S06180","P03135","P04090","P07000","S09180"},{"S06180","P02090","P26139","P27180","P28090","S10180"},{"S06180","P02090","P09180","S11180"},{"S06000","P01090","P10135","P11045","P12090","S12180"},{"S06000","P14034","P15090","P18180","S13180"},{"S06000","P14034","P15090","P19143","P20180","S14180"},{"S06180","P02090","P26045","P25131","P24090","S15180"},{"S06000","P14034","P15090","P17180"},{"S06000","P14034","P15090","P18180"},{"S06000","P14034","P15090","P19180"},{"S06000","P14034","P15090","P16180"},{"S06000","P14034","P15180"},{"S06000","P14180"},{"S06000","P01180"},{"S06180","P02180"},{"S06180","P03180"},{"S06180","P03135","P04180"},{"S06000","P01090","P10135","P11180","P05180"},{"S06180","P03135","P04090","P06180"},{"S06180","P03135","P04090","P07180"},{"S06180","P03135","P04090","P30180"},{"S06180","P03135","P04090","P31180"},{"S06180","P03135","P04090","P31045","P32180"},{"S06180","P02090","P26139","P27180","P28090","P29180"},{"S06180","P02090","P26045","P25131","P24090","P22180"},{"S06000","P14034","P15090","P19143","P20180"},{"S06000","P01090","P10041","P13180"},{"S06000","P01090","P10135","P11045","P12180"},{"S06000","P01090","P10135","P11180"},{"S06000","P01090","P10180"},{"S06000","P01090","P10135","P11180","P08180"},{"S06000","P01090","P10135","P11045","P12090","P21180"},{"S06180","P02090","P26045","P25131","P24090","P23180"},{"S06180","P02090","P26045","P25180"},{"S06180","P02090","P26045","P25131","P24180"},{"S06180","P02090","P26139","P27180"},{"S06180","P02090","P26180"},{"S06180","P02090","P09180"},{"S06180","P02090","P26139","P27180","P28180"},
{"S07000","P14034","P15090","C01180"},{"S07180","P03135","P04090","C02180"},{"S07180","P03135","P04090","C03180"},{"S07000","P02090","P26045","P25000","S01180"},{"S07000","P14034","P15090","S02180"},{"S07000","P14034","P15090","S03180"},{"S07000","P14034","P15090","S04180"},{"S07000","S05180"},{"S07000","S06180"},{"S07180"},{"S07180","P03135","P04090","P06270","P05006","S08180"},{"S07180","P03135","P04090","P07000","S09180"},{"S07180","P03135","P04090","P07000","P28090","S10180"},{"S07180","P03135","P04090","P06000","S11180"},{"S07000","P01090","P10135","P11045","P12090","S12180"},{"S07000","P14034","P15090","P18180","S13180"},{"S07180","P03135","P04090","P07000","P28090","P29000","S14180"},{"S07180","P03135","P04090","P07000","P27045","P24090","S15180"},{"S07000","P14034","P15090","P17180"},{"S07000","P14034","P15090","P18180"},{"S07000","P14034","P15090","P19180"},{"S07000","P14034","P15090","P16180"},{"S07000","P14034","P15180"},{"S07000","P14180"},{"S07000","P01180"},{"S07000","P02180"},{"S07180","P03180"},{"S07180","P03135","P04180"},{"S07180","P03135","P04090","P06270","P05180"},{"S07180","P03135","P04090","P06180"},{"S07180","P03135","P04090","P07180"},{"S07180","P03135","P04090","P30180"},{"S07180","P03135","P04090","P31180"},{"S07180","P03135","P04090","P31045","P32180"},{"S07180","P03135","P04090","P07000","P28090","P29180"},{"S07180","P03135","P04090","P07000","P28090","P29000","P22180"},{"S07000","P14034","P15090","P19143","P20180"},{"S07000","P01090","P10041","P13180"},{"S07000","P01090","P10135","P11045","P12180"},{"S07000","P01090","P10135","P11180"},{"S07000","P01090","P10180"},{"S07180","P03135","P04090","P06270","P05006","S08354","P08180"},{"S07000","P14034","P15090","P18180","P21180"},{"S07180","P03135","P04090","P07000","P27045","P24090","P23180"},{"S07000","P02090","P26045","P25180"},{"S07180","P03135","P04090","P07000","P27045","P24180"},{"S07180","P03135","P04090","P07000","P27180"},{"S07000","P02090","P26180"},{"S07000","P02090","P09180"},{"S07180","P03135","P04090","P07000","P28180"},
{"S08354","P08000","P11045","P12319","P13000","P16090","C01180"},{"S08186","P05090","P06270","C02180"},{"S08186","P05090","C03180"},{"S08186","P05090","P06000","P09090","P26045","P25000","S01180"},{"S08354","P08000","P11045","P12319","P13000","P16090","S02180"},{"S08354","P08000","P11045","P12319","P13000","P16090","S03180"},{"S08354","P08000","P11045","P12319","P13000","P16270","S04180"},{"S08354","P08000","P11315","P10270","P01000","S05180"},{"S08354","P08000","P11315","P10270","P01180","S06180"},{"S08186","P05090","P06270","P04315","P03000","S07180"},{"S08180"},{"S08186","P05090","P07000","S09180"},{"S08354","P08090","S10180"},{"S08186","P05090","P06000","S11180"},{"S08354","P08000","P11045","P12090","S12180"},{"S08354","P08000","P11045","P12090","P21000","S13180"},{"S08354","P08090","P29000","S14180"},{"S08354","P08090","P28000","P27045","P24090","S15180"},{"S08354","P08000","P11045","P12319","P13000","P16090","P17180"},{"S08354","P08000","P11045","P12090","P21000","P18180"},{"S08354","P08090","P29000","P20323","P19180"},{"S08354","P08000","P11045","P12319","P13000","P16180"},{"S08354","P08000","P11315","P10270","P01000","P14034","P15180"},{"S08354","P08000","P11315","P10270","P01000","P14180"},{"S08354","P08000","P11315","P10270","P01180"},{"S08186","P05270","P04315","P03000","P02180"},{"S08186","P05270","P04315","P03180"},{"S08186","P05270","P04180"},{"S08186","P05180"},{"S08186","P05090","P06180"},{"S08186","P05090","P07180"},{"S08186","P05090","P30180"},{"S08186","P05090","P31180"},{"S08186","P05090","P31045","P32180"},{"S08354","P08090","P29180"},{"S08354","P08090","P29000","P22180"},{"S08354","P08090","P29000","P20180"},{"S08354","P08000","P11045","P12319","P13180"},{"S08354","P08000","P11045","P12180"},{"S08354","P08000","P11180"},{"S08354","P08000","P11315","P10180"},{"S08354","P08180"},{"S08354","P08000","P11045","P12090","P21180"},{"S08354","P08090","P28000","P27045","P24090","P23180"},{"S08186","P05090","P06000","P09090","P26045","P25180"},{"S08354","P08090","P28000","P27045","P24180"},{"S08354","P08090","P28000","P27180"},{"S08186","P05090","P06000","P09090","P26180"},{"S08186","P05090","P06000","P09180"},{"S08354","P08090","P28180"},
{"S09000","P27319","P26045","P25000","P17270","C01180"},{"S09180","P07270","C02180"},{"S09180","P07090","C03180"},{"S09000","P27319","P26045","P25000","S01180"},{"S09000","P27319","P26045","P25000","P17090","S02180"},{"S09000","P27319","P26045","P25000","P17270","S03180"},{"S09000","P27319","P26045","P25000","P17270","S04180"},{"S09180","P07270","P04315","P03000","S05180"},{"S09180","P07270","P04315","P03000","S06180"},{"S09180","P07270","P04315","P03000","S07180"},{"S09180","P07270","P05006","S08180"},{"S09180"},{"S09000","P28090","S10180"},{"S09180","P07270","P06000","S11180"},{"S09000","P27045","P24090","P23000","P21270","S12180"},{"S09000","P27045","P24090","P23000","S13180"},{"S09000","P28090","P29000","S14180"},{"S09000","P27045","P24090","S15180"},{"S09000","P27319","P26045","P25000","P17180"},{"S09000","P27045","P24090","P23000","P18180"},{"S09000","P28090","P29000","P20323","P19180"},{"S09000","P27319","P26045","P25000","P17270","P16180"},{"S09000","P27319","P26045","P25000","P17270","P15180"},{"S09000","P27319","P26270","P02000","P14180"},{"S09000","P27319","P26270","P02000","P01180"},{"S09000","P27319","P26270","P02180"},{"S09180","P07270","P04315","P03180"},{"S09180","P07270","P04180"},{"S09180","P07270","P05180"},{"S09180","P07270","P06180"},{"S09180","P07180"},{"S09180","P07090","P30180"},{"S09180","P07090","P31180"},{"S09180","P07090","P31045","P32180"},{"S09000","P28090","P29180"},{"S09000","P28090","P29000","P22180"},{"S09000","P28090","P29000","P20180"},{"S09000","P27045","P24090","P23000","P21278","P13180"},{"S09000","P28270","P08000","P11045","P12180"},{"S09000","P28270","P08000","P11180"},{"S09000","P28270","P08000","P11315","P10180"},{"S09000","P28270","P08180"},{"S09000","P27045","P24090","P23000","P21180"},{"S09000","P27045","P24090","P23180"},{"S09000","P27319","P26045","P25180"},{"S09000","P27045","P24180"},{"S09000","P27180"},{"S09000","P27319","P26180"},{"S09000","P27319","P26270","P09180"},{"S09000","P28180"},
{"S10090","P29000","P20323","P19270","C01180"},{"S10270","P28180","P07270","C02180"},{"S10270","P28180","P07090","C03180"},{"S10270","P28000","P27319","P26045","P25000","S01180"},{"S10090","P29000","P20323","P19270","S02180"},{"S10270","P28000","P27319","P26045","P25000","P17270","S03180"},{"S10090","P29000","P20323","P19270","S04180"},{"S10270","P08000","P11315","P10270","P01000","S05180"},{"S10270","P28000","P27319","P26270","P02000","S06180"},{"S10270","P28180","P07270","P04315","P03000","S07180"},{"S10270","P08174","S08180"},{"S10270","P28180","S09180"},{"S10180"},{"S10270","P28000","P27319","P26270","P09180","S11180"},{"S10270","P08000","P11045","P12090","S12180"},{"S10270","P28000","P27045","P24090","P23000","S13180"},{"S10090","P29000","S14180"},{"S10090","P29000","P22270","S15180"},{"S10270","P28000","P27319","P26045","P25000","P17180"},{"S10270","P28000","P27045","P24090","P23000","P18180"},{"S10090","P29000","P20323","P19180"},{"S10270","P28000","P27319","P26045","P25000","P17270","P16180"},{"S10270","P28000","P27319","P26045","P25000","P17270","P15180"},{"S10270","P28000","P27319","P26270","P02000","P14180"},{"S10270","P28000","P27319","P26270","P02000","P01180"},{"S10270","P28000","P27319","P26270","P02180"},{"S10270","P28180","P07270","P04315","P03180"},{"S10270","P28180","P07270","P04180"},{"S10270","P28180","P07270","P05180"},{"S10270","P28180","P07270","P06180"},{"S10270","P28180","P07180"},{"S10270","P28180","P07090","P30180"},{"S10090","P29180","P32225","P31180"},{"S10090","P29180","P32180"},{"S10090","P29180"},{"S10090","P29000","P22180"},{"S10090","P29000","P20180"},{"S10270","P08000","P11045","P12319","P13180"},{"S10270","P08000","P11045","P12180"},{"S10270","P08000","P11180"},{"S10270","P08000","P11315","P10180"},{"S10270","P08180"},{"S10270","P28000","P27045","P24090","P23000","P21180"},{"S10270","P28000","P27045","P24090","P23180"},{"S10270","P28000","P27319","P26045","P25180"},{"S10270","P28000","P27045","P24180"},{"S10270","P28000","P27180"},{"S10270","P28000","P27319","P26180"},{"S10270","P28000","P27319","P26270","P09180"},{"S10270","P28180"},
{"S11000","P09090","P26045","P25000","P17270","C01180"},{"S11180","P06270","C02180"},{"S11180","P06090","C03180"},{"S11000","P09090","P26045","P25000","S01180"},{"S11000","P09090","P26045","P25000","P17090","S02180"},{"S11000","P09090","P26045","P25000","P17270","S03180"},{"S11000","P09270","P02000","P14034","P15090","S04180"},{"S11000","P09270","P02000","S05180"},{"S11000","P09270","P02000","S06180"},{"S11180","P06270","P04315","P03000","S07180"},{"S11180","P06270","P05006","S08180"},{"S11180","P06090","P07000","S09180"},{"S11000","P09090","P26139","P27180","P28090","S10180"},{"S11180"},{"S11180","P06270","P05006","S08354","P08000","P11045","P12090","S12180"},{"S11000","P09090","P26045","P25131","P24090","P23000","S13180"},{"S11000","P09090","P26045","P25131","P24090","P22000","S14180"},{"S11000","P09090","P26045","P25131","P24090","S15180"},{"S11000","P09090","P26045","P25000","P17180"},{"S11000","P09090","P26045","P25000","P17090","P18180"},{"S11000","P09090","P26045","P25000","P17090","P19180"},{"S11000","P09090","P26045","P25000","P17270","P16180"},{"S11000","P09270","P02000","P14034","P15180"},{"S11000","P09270","P02000","P14180"},{"S11000","P09270","P02000","P01180"},{"S11000","P09270","P02180"},{"S11180","P06270","P04315","P03180"},{"S11180","P06270","P04180"},{"S11180","P06270","P05180"},{"S11180","P06180"},{"S11180","P06090","P07180"},{"S11180","P06090","P30180"},{"S11180","P06090","P31180"},{"S11180","P06090","P31045","P32180"},{"S11000","P09090","P26139","P27180","P28090","P29180"},{"S11000","P09090","P26045","P25131","P24090","P22180"},{"S11000","P09090","P26045","P25000","P17090","P19143","P20180"},{"S11000","P09270","P02000","P01090","P10041","P13180"},{"S11180","P06270","P05006","S08354","P08000","P11045","P12180"},{"S11180","P06270","P05006","S08354","P08000","P11180"},{"S11000","P09270","P02000","P01090","P10180"},{"S11180","P06270","P05006","S08354","P08180"},{"S11000","P09090","P26045","P25131","P24090","P23000","P21180"},{"S11000","P09090","P26045","P25131","P24090","P23180"},{"S11000","P09090","P26045","P25180"},{"S11000","P09090","P26045","P25131","P24180"},{"S11000","P09090","P26139","P27180"},{"S11000","P09090","P26180"},{"S11000","P09180"},{"S11000","P09090","P26139","P27180","P28180"},
{"S12270","P12319","P13000","P16090","C01180"},{"S12270","P12225","P11180","P05090","P06270","C02180"},{"S12270","P12225","P11180","P05090","C03180"},{"S12090","P21000","P18270","P17180","S01180"},{"S12090","P21000","P18270","S02180"},{"S12270","P12319","P13000","P16090","S03180"},{"S12270","P12319","P13000","P16270","S04180"},{"S12270","P12225","P11315","P10270","P01000","S05180"},{"S12270","P12225","P11315","P10270","P01180","S06180"},{"S12270","P12225","P11315","P10270","P01180","S07180"},{"S12270","P12225","P11180","S08180"},{"S12090","P21180","P23270","P24225","P27180","S09180"},{"S12270","P12225","P11180","P08090","S10180"},{"S12270","P12225","P11180","P05090","P06000","S11180"},{"S12180"},{"S12090","P21000","S13180"},{"S12090","P21000","P18090","P19143","P20180","S14180"},{"S12270","P12319","P13000","P16090","P17180","P25131","P24090","S15180"},{"S12270","P12319","P13000","P16090","P17180"},{"S12090","P21000","P18180"},{"S12090","P21000","P18090","P19180"},{"S12270","P12319","P13000","P16180"},{"S12270","P12319","P13000","P16270","P15180"},{"S12270","P12319","P13000","P16270","P15214","P14180"},{"S12270","P12225","P11315","P10270","P01180"},{"S12270","P12225","P11315","P10270","P01180","P02180"},{"S12270","P12225","P11315","P10270","P01180","P03180"},{"S12270","P12225","P11180","P05270","P04180"},{"S12270","P12225","P11180","P05180"},{"S12270","P12225","P11180","P05090","P06180"},{"S12270","P12225","P11180","P05090","P07180"},{"S12270","P12225","P11180","P05090","P30180"},{"S12270","P12225","P11180","P05090","P31180"},{"S12270","P12225","P11180","P05090","P31045","P32180"},{"S12270","P12225","P11180","P08090","P29180"},{"S12090","P21000","P18090","P19143","P20180","P22180"},{"S12090","P21000","P18090","P19143","P20180"},{"S12270","P12319","P13180"},{"S12270","P12180"},{"S12270","P12225","P11180"},{"S12270","P12225","P11315","P10180"},{"S12270","P12225","P11180","P08180"},{"S12090","P21180"},{"S12270","P12319","P13000","P16090","P17180","P25131","P24090","P23180"},{"S12270","P12319","P13000","P16090","P17180","P25180"},{"S12270","P12319","P13000","P16090","P17180","P25131","P24180"},{"S12270","P12225","P11180","P08090","P28000","P27180"},{"S12270","P12319","P13000","P16090","P17180","P25225","P26180"},{"S12270","P12225","P11315","P10270","P01180","P02090","P09180"},{"S12270","P12225","P11180","P08090","P28180"},
{"S13000","P18270","C01180"},{"S13180","P23270","P24225","P27180","P07270","C02180"},{"S13180","P23270","P24225","P27180","P07090","C03180"},{"S13000","P18270","P17180","S01180"},{"S13000","P18270","S02180"},{"S13000","P18270","S03180"},{"S13000","P18270","S04180"},{"S13000","P18270","P15214","P14180","S05180"},{"S13000","P18270","P15214","P14180","S06180"},{"S13000","P18270","P15214","P14180","S07180"},{"S13180","P21270","P12225","P11180","S08180"},{"S13180","P23270","P24225","P27180","S09180"},{"S13180","P23270","P24225","P27180","P28090","S10180"},{"S13180","P23270","P24311","P25225","P26270","P09180","S11180"},{"S13180","P21270","S12180"},{"S13180"},{"S13000","P18090","P19143","P20180","S14180"},{"S13000","P18090","P19143","P20180","P22270","S15180"},{"S13000","P18270","P17180"},{"S13000","P18180"},{"S13000","P18090","P19180"},{"S13000","P18270","P16180"},{"S13000","P18270","P15180"},{"S13000","P18270","P15214","P14180"},{"S13000","P18270","P15214","P14180","P01180"},{"S13000","P18270","P15214","P14180","P02180"},{"S13000","P18270","P15214","P14180","P03180"},{"S13000","P18270","P15214","P14180","P03135","P04180"},{"S13180","P21270","P12225","P11180","P05180"},{"S13000","P18270","P17180","P25225","P26270","P09180","P06180"},{"S13000","P18090","P19143","P20180","P29270","P28180","P07180"},{"S13000","P18090","P19143","P20180","P22270","P23180","P30180"},{"S13000","P18090","P19143","P20180","P32225","P31180"},{"S13000","P18090","P19143","P20180","P32180"},{"S13000","P18090","P19143","P20180","P29180"},{"S13000","P18090","P19143","P20180","P22180"},{"S13000","P18090","P19143","P20180"},{"S13180","P21278","P13180"},{"S13180","P21270","P12180"},{"S13180","P21270","P12225","P11180"},{"S13180","P21278","P13221","P10180"},{"S13180","P21270","P12225","P11180","P08180"},{"S13180","P21180"},{"S13000","P18090","P19143","P20180","P22270","P23180"},{"S13000","P18270","P17180","P25180"},{"S13000","P18270","P17180","P25131","P24180"},{"S13000","P18270","P17180","P25225","P26139","P27180"},{"S13000","P18270","P17180","P25225","P26180"},{"S13000","P18270","P17180","P25225","P26270","P09180"},{"S13000","P18090","P19143","P20180","P29270","P28180"},
{"S14000","P20323","P19270","C01180"},{"S14180","P29270","P28180","P07270","C02180"},{"S14180","P32225","P31270","C03180"},{"S14000","P20323","P19270","P17180","S01180"},{"S14000","P20323","P19270","S02180"},{"S14000","P20323","P19270","S03180"},{"S14000","P20323","P19270","S04180"},{"S14000","P20323","P19270","P15214","P14180","S05180"},{"S14000","P20323","P19270","P15214","P14180","S06180"},{"S14180","P29270","P28180","P07270","P04315","P03000","S07180"},{"S14180","P29270","P08174","S08180"},{"S14180","P29270","P28180","S09180"},{"S14180","P29270","S10180"},{"S14180","P22270","P24311","P25225","P26270","P09180","S11180"},{"S14000","P20323","P19270","P18180","P21270","S12180"},{"S14000","P20323","P19270","P18180","S13180"},{"S14180"},{"S14180","P22270","S15180"},{"S14000","P20323","P19270","P17180"},{"S14000","P20323","P19270","P18180"},{"S14000","P20323","P19180"},{"S14000","P20323","P19270","P16180"},{"S14000","P20323","P19270","P15180"},{"S14000","P20323","P19270","P15214","P14180"},{"S14000","P20323","P19270","P15214","P14180","P01180"},{"S14180","P22270","P24311","P25225","P26270","P02180"},{"S14180","P22270","P24311","P25225","P26270","P02180","P03180"},{"S14180","P29270","P08174","P05270","P04180"},{"S14180","P29270","P08174","P05180"},{"S14180","P29270","P28180","P07270","P06180"},{"S14180","P29270","P28180","P07180"},{"S14180","P22270","P23180","P30180"},{"S14180","P32225","P31180"},{"S14180","P32180"},{"S14180","P29180"},{"S14180","P22180"},{"S14000","P20180"},{"S14000","P20323","P19270","P16180","P13180"},{"S14180","P22270","P23000","P21270","P12180"},{"S14180","P29270","P08000","P11180"},{"S14000","P20323","P19270","P16180","P13221","P10180"},{"S14180","P29270","P08180"},{"S14180","P22270","P23000","P21180"},{"S14180","P22270","P23180"},{"S14180","P22270","P24311","P25180"},{"S14180","P22270","P24180"},{"S14180","P22270","P24225","P27180"},{"S14180","P22270","P24311","P25225","P26180"},{"S14180","P22270","P24311","P25225","P26270","P09180"},{"S14180","P29270","P28180"},
{"S15270","P24311","P25000","P17270","C01180"},{"S15270","P24225","P27180","P07270","C02180"},{"S15090","P22180","P32225","P31270","C03180"},{"S15270","P24311","P25000","S01180"},{"S15090","P22000","P20323","P19270","S02180"},{"S15270","P24311","P25000","P17270","S03180"},{"S15270","P24311","P25000","P17270","S04180"},{"S15270","P24311","P25000","P17270","P15214","P14180","S05180"},{"S15270","P24311","P25225","P26270","P02000","S06180"},{"S15270","P24225","P27180","P07270","P04315","P03000","S07180"},{"S15270","P24225","P27180","P28270","P08174","S08180"},{"S15270","P24225","P27180","S09180"},{"S15090","P22180","P29270","S10180"},{"S15270","P24311","P25225","P26270","P09180","S11180"},{"S15270","P24311","P25000","P17270","P16180","P13139","P12090","S12180"},{"S15090","P22000","P20323","P19270","P18180","S13180"},{"S15090","P22000","S14180"},{"S15180"},{"S15270","P23000","P18270","P17180"},{"S15270","P23000","P18180"},{"S15090","P22000","P20323","P19180"},{"S15270","P23000","P18270","P16180"},{"S15270","P23000","P18270","P15180"},{"S15270","P23000","P18270","P15214","P14180"},{"S15270","P23000","P21278","P13221","P10270","P01180"},{"S15270","P24311","P25225","P26270","P02180"},{"S15270","P24225","P27180","P07270","P04315","P03180"},{"S15270","P24225","P27180","P07270","P04180"},{"S15270","P24225","P27180","P07270","P05180"},{"S15270","P24225","P27180","P07270","P06180"},{"S15270","P24225","P27180","P07180"},{"S15270","P23180","P30180"},{"S15090","P22180","P32225","P31180"},{"S15090","P22180","P32180"},{"S15090","P22180","P29180"},{"S15090","P22180"},{"S15090","P22000","P20180"},{"S15270","P23000","P21278","P13180"},{"S15270","P23000","P21270","P12180"},{"S15270","P23000","P21270","P12225","P11180"},{"S15270","P23000","P21278","P13221","P10180"},{"S15270","P24225","P27180","P28270","P08180"},{"S15270","P23000","P21180"},{"S15270","P23180"},{"S15270","P24311","P25180"},{"S15270","P24180"},{"S15270","P24225","P27180"},{"S15270","P24311","P25225","P26180"},{"S15270","P24311","P25225","P26270","P09180"},{"S15270","P24225","P27180","P28180"},
};

int angleToTurn = 0;
int needTurnAfterStation = 0;
int P = 0, I = 0, D = 0, previousError = 0, PID = 0;
//1,1.25,1
int highSpeed = 100;
//higher p = move to cnter faster, d higher is more dampening, higher i = faster reaction to steady state error
//0.5, 0.01, 4
double Kp = 0.95, Ki = 0.01, Kd = 9.5;

//changing dist also means changing turning Cofficient
int curvedTurnStartDist = 20;

//lower = less sharp, higher = more sharp
double turningCoefficient = 0.9;
double startDistance = 0;

#define CsBot_AI_C//DO NOT delete this line

////////////CoSpace System Functions, Please DON't modify./////////////////////
///////////////////////////////////////////////////////////////////////////////

char TaskString[256];//For Individual Challenge ONLY
struct Task
{
    int TaskID;
    int StationID;
    int ActionID;
} TaskList[10];//For Individual Challenge ONLY

DLL_EXPORT int  GetGameID()
{
    return CurGame;
}
DLL_EXPORT int GetCurAction()
{
    return CurAction;
}

DLL_EXPORT void SetTaskString(char* gameTask)
{
    strcpy(TaskString, gameTask);
    printf(gameTask);
    printf("\r\n");
}

DLL_EXPORT void AddTaskItem(int TaskID, int StationID, int ActionID)
{
    if (TaskID < 0 || TaskID >= 10) return;
    TaskList[TaskID].TaskID = TaskID;
    TaskList[TaskID].StationID = StationID;
    TaskList[TaskID].ActionID = ActionID;
    printf("Task:(TaskID:%d, StID:%d, ActID:%d)\r\n", TaskID, StationID, ActionID);
}
//May not work well in Swarmland. 
int TurnTo(int curRot, int targetRot)
{
    int angularErrorThreshold = 10;
    int angleDiff = (curRot - targetRot + 360) % 360;
    int turningSpeed;

    if (angleDiff <= angularErrorThreshold || angleDiff > 360 - angularErrorThreshold)
    {
        Duration = 0;
        turningSpeed = 0;
        return 1;
    }
    else if (angleDiff <= 180)
        turningSpeed = angleDiff / 2 + 3;
    else
        turningSpeed = (angleDiff - 360) / 2 - 3;
        
    WheelLeft = turningSpeed;
    WheelRight = -WheelLeft;
    Duration = 128;
    return 1;
}



//calculates the difference in angle, +\- with respect to start facing
int calculateAngleDiff(int start, int end)
{
    int angleDiff = (end - start);
    if (angleDiff > 180) { return angleDiff - 360; }
    else if (angleDiff < -180) { return angleDiff + 360; }
    return angleDiff;
}


int CurvedTurnTo(int curRot, int targetRot)
{
    int angularErrorThreshold = 20;
    int angleDiff = calculateAngleDiff(curRot, targetRot);

    //if turning is done
    if (angleDiff <= angularErrorThreshold && angleDiff >= -angularErrorThreshold)
    {
        Duration = 0;
        return 1;
    }
    //turning right
    if (angleDiff < 0)
    {
        WheelLeft = highSpeed;
        WheelRight = highSpeed-(abs(angleDiff) * turningCoefficient);
    }
    //turning left  
    else
    {
        WheelLeft = highSpeed-(abs(angleDiff) * turningCoefficient);
        WheelRight = highSpeed;
    }
    Duration = 128;
    return 1;

}
struct DeliveryItem
{
    int ItemID;
    int CenterID;
    int CollectionPtID;
    int Deadline;
    int ItemScore;
    int CurStatus; //1:at Center; 2:on Car; 3:at Station;
} DeliveryItemList[100]; //All Items

DLL_EXPORT void AddDeliveryItem(int ItemID, int CenterID, int StationID, int ItemScore, int Deadline, int CurStatus)
{
    if (ItemID < 0 || ItemID>99) {
        printf("ItemID Error! ID = %d", ItemID);
        return;
    }
    DeliveryItemList[ItemID].ItemID = ItemID;
    DeliveryItemList[ItemID].CenterID = CenterID;
    DeliveryItemList[ItemID].CollectionPtID = StationID;
    DeliveryItemList[ItemID].ItemScore = ItemScore;
    DeliveryItemList[ItemID].Deadline = Deadline;
    DeliveryItemList[ItemID].CurStatus = CurStatus;
}
DLL_EXPORT void RequestItems(int* Items)
{
    for (int i = 0; i < 6; i++)
    {
        Items[i] = -1;
    }
}

static void listout()
{
    /**
     * Extracts the ItemID, CollectionPtID, ItemScore, and Deadline from the first 100 elements of a DeliveryItemList.
     *
     * @param DeliveryItemList A list of delivery items.
     *
     * @returns Four arrays containing the ItemID, CollectionPtID, ItemScore, and Deadline of the first 100 elements of the DeliveryItemList.
     */
    for(int i=0; i<100; i++)
    {
        a[i]=DeliveryItemList[i].ItemID;
        b[i]=DeliveryItemList[i].CollectionPtID;
        c[i]=DeliveryItemList[i].ItemScore;
        d[i]=DeliveryItemList[i].Deadline;
    }
    for(int i=0; i<100; i++)
    {
        if (i>0 && a[i]<=0) continue;
        printf("ItemID : %d | ",a[i]);
        printf("StnID : %d | ",b[i]);
        printf("Score : %d | ",c[i]);
        printf("Deadline : %d | ",d[i]);
        printf("\n");
    }
    printf("**************************\n\n\n");
}
 
void GameStart()
{
//Add your code here
}

void AILoopStart()
{  
    //Add your code here
    if (!loadedPoints)
    {
        loadedPoints = true;
        FILE *fp;
        fp  = fopen ("path.txt", "r");
        if (fp != NULL)
        {
            stationsToVisit[0] = 0;
            char placeholder[5];
            int i = 0;
            int j = 1;
            while (!feof(fp))
            {
                char c = fgetc(fp);                                   
                if (c == '\n')
                {
                    placeholder[i] = '\0';
                    stationsToVisit[j] = atoi(placeholder);
                    i = 0;
                    j++;
                    memset(placeholder, 0, sizeof(placeholder));
                }
                else
                {
                    placeholder[i] = c;
                    i++;
                }                
            }
            fclose(fp);
        }        
    }
}

 
DLL_EXPORT char* GetTeamName()
{
     return "test3";
}

char info[3000];
DLL_EXPORT char* GetDebugInfo()
{
    sprintf(info, "Duration=%d;CurAction=%d;CurGame=%d;US_Front=%d;US_Left=%d;US_Right=%d;PositionX=%d;PositionY=%d;RotationZ=%d;DeltaAngle=%d;DeltaDist=%d;NavID=%d;NavDist=%d;CtrID=%d;CtrDist=%d;StnID=%d;StnDist=%d;Time=%d;MyState=%d;WheelLeft=%d;WheelRight=%d;LED=%d;",Duration,CurAction,CurGame,US_Front,US_Left,US_Right,PositionX,PositionY,RotationZ,DeltaAngle,DeltaDist,NavID,NavDist,CtrID,CtrDist,StnID,StnDist,Time,MyState,WheelLeft,WheelRight,LED);
    return info;
}
DLL_EXPORT void SetGameID(int GameID)
{
    int i = 0;
    if (CurGame != GameID)
    {
        GameStart();
        for (i = 0; i < 100; i++)
        {
            DeliveryItemList[i].ItemID = i;
            DeliveryItemList[i].CenterID = -1;
            DeliveryItemList[i].CollectionPtID = 0;
            DeliveryItemList[i].Deadline = 0;
            DeliveryItemList[i].ItemScore = 0;
            DeliveryItemList[i].CurStatus = 0;
        }
        for (i = 0; i < 10; i++)
        {
            TaskList[i].TaskID = i;
            TaskList[i].StationID = 0;
            TaskList[i].ActionID = 0;
        }
    }
    CurGame = GameID;
}


DLL_EXPORT void SetDataAI(volatile int* packet, volatile int *AI_IN)
{

    int sum = 0;

    US_Front = AI_IN[0]; packet[0] = US_Front; sum += US_Front;
    US_Left = AI_IN[1]; packet[1] = US_Left; sum += US_Left;
    US_Right = AI_IN[2]; packet[2] = US_Right; sum += US_Right;
    PositionX = AI_IN[3]; packet[3] = PositionX; sum += PositionX;
    PositionY = AI_IN[4]; packet[4] = PositionY; sum += PositionY;
    RotationZ = AI_IN[5]; packet[5] = RotationZ; sum += RotationZ;
    DeltaAngle = AI_IN[6]; packet[6] = DeltaAngle; sum += DeltaAngle;
    DeltaDist = AI_IN[7]; packet[7] = DeltaDist; sum += DeltaDist;
    NavID = AI_IN[8]; packet[8] = NavID; sum += NavID;
    NavDist = AI_IN[9]; packet[9] = NavDist; sum += NavDist;
    CtrID = AI_IN[10]; packet[10] = CtrID; sum += CtrID;
    CtrDist = AI_IN[11]; packet[11] = CtrDist; sum += CtrDist;
    StnID = AI_IN[12]; packet[12] = StnID; sum += StnID;
    StnDist = AI_IN[13]; packet[13] = StnDist; sum += StnDist;
    Time = AI_IN[14]; packet[14] = Time; sum += Time;
    MyState = AI_IN[15]; packet[15] = MyState; sum += MyState;
    packet[16] = sum;

}

static void run()
{
    WheelLeft = 0;
    WheelRight = 0;
    LED = 0;
    P = DeltaDist;
    I = I + DeltaDist;
    D = DeltaDist-previousError;
    PID = (Kp*P) + (Ki*I) + (Kd*D);
    previousError = DeltaDist;
    WheelLeft = highSpeed+PID;
    WheelRight = highSpeed-PID; 
}

int IsEdgeTurn(int id)
{
    if (id == 19 || id == 32 || id == 4 || id==14) {return 90; }
    else if (id == 20 || id == 31 || id == 3 || id == 15) {return -90; }
    return 0;
}

DLL_EXPORT void GetCommand(int *AI_OUT)
{
    AI_OUT[0] = WheelLeft;
    AI_OUT[1] = WheelRight;
    AI_OUT[2] = LED;
    AI_OUT[3] = MyState;
}
void Game0()
{

    //the current route we are following
    int start = stationsToVisit[nextStation-1] == 0 ? 0 : stationsToVisit[nextStation-1] + 2;
    int end = stationsToVisit[nextStation] == 0 ? 0 : stationsToVisit[nextStation] + 2;

    char value[] = {pathings[start * 50 + end][pathingIndex][1], pathings[start * 50 + end][pathingIndex][2], '\0'};    
    int pointID = atoi(value);

    char angleStr[] = {pathings[start * 50 + end][pathingIndex][3], pathings[start * 50 + end][pathingIndex][4],
     pathings[start * 50 + end][pathingIndex][5], '\0'};
    int nextAngle = atoi(angleStr);    
      
    if(Duration>0)
    {
        Duration--;
    }
    else if (needTurnAfterStation)
    {
        Duration = 10;
        CurAction = 1;
        needTurnAfterStation = 0;
        
    }
        
    else if(pathings[start * 50 + end][pathingIndex][0] == 'P' && NavID==pointID && NavDist<=6)
    {
        angleToTurn = nextAngle;
        Duration = 10;
        CurAction = 1;
        

        pathingIndex++;
        
    }
    else if(pathings[start * 50 + end][pathingIndex][0] == 'P' && NavID==pointID && NavDist<=curvedTurnStartDist && NavDist>6 && abs(calculateAngleDiff(RotationZ, nextAngle)) < 90+10)
    {
        angleToTurn = nextAngle;
        Duration = 10;
        CurAction = 2;
        
        pathingIndex++;
        
    }
    //turning on the edge, this code makes it smoother lmao
    else if(abs(IsEdgeTurn(NavID)) != 0 && NavDist<=5)
    {
        angleToTurn = RotationZ + IsEdgeTurn(NavID);
        CurAction = 2;  
        Duration = 10; 
    }
    else if(pathings[start * 50 + end][pathingIndex][0] == 'S' && StnID == pointID && StnDist>=-7 && StnDist<=7)
    {
        
        Duration = 80;
        CurAction =3;

        nextStation++;
        start = stationsToVisit[nextStation-1] == 0 ? 0 : stationsToVisit[nextStation-1] + 2;
        end = stationsToVisit[nextStation] == 0 ? 0 : stationsToVisit[nextStation] + 2;
        pathingIndex = 1;

        //recalculate next angle
        char angleStr[] = {pathings[start * 50 + end][0][3], pathings[start * 50 + end][0][4],
        pathings[start * 50 + end][0][5], '\0'};
        angleToTurn = atoi(angleStr);   
    }
    else if(pathings[start * 50 + end][pathingIndex][0] == 'C' && CtrID == pointID && CtrDist>=-7 && CtrDist<=7)
    {
        angleToTurn = nextAngle;
        
        Duration = 80;
        CurAction =3;


        nextStation++;
        start = stationsToVisit[nextStation-1] == 0 ? 0 : stationsToVisit[nextStation-1] + 2;
        end = stationsToVisit[nextStation] == 0 ? 0 : stationsToVisit[nextStation] + 2;
        pathingIndex = 1;

        //recalculate next angle
        char angleStr[] = {pathings[start * 50 + end][0][3], pathings[start * 50 + end][0][4],
        pathings[start * 50 + end][0][5], '\0'};
        angleToTurn = atoi(angleStr);        
    }
    else if(true)
    {
        Duration = 0;
        CurAction = 4;
    }
    switch(CurAction)
    {
        case 1:
            LED=0;
            TurnTo(RotationZ, angleToTurn);
            break;
        case 2:
            LED=0;
            CurvedTurnTo(RotationZ, angleToTurn);
            break;
        case 3:
            WheelLeft=0;
            WheelRight=0;
            LED=1;
            if (Duration == 1)
            {
                listout();
            }
            if (angleToTurn < RotationZ-30 || angleToTurn > RotationZ+30)
            {
                needTurnAfterStation = 1;
            }
            break;
        case 4:
            run();
            break;
        case 5:
            WheelLeft = -highSpeed;
            WheelRight = -highSpeed;
            
            if (angleToTurn < RotationZ-30 || angleToTurn > RotationZ+30)
            {
                needTurnAfterStation = 1;
            }        
        default:
            break;
    }

}


DLL_EXPORT void AILoop()
{
    AILoopStart();
    switch (CurGame)
    {
    case 0:
        Game0();
        break;
    default:
        WheelLeft=0;
        WheelRight=0;
        LED=0;
        MyState=0;
        break;
    }
}


